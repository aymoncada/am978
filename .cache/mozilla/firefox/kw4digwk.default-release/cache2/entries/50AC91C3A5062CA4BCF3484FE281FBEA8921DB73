// -- Sammy.js -- /sammy.js
// http://sammyjs.org
// Version: 0.7.6
// Built: 2014-08-26 10:45:34 +0300
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{jQuery.sammy=window.Sammy=factory(jQuery)}})(function($){var Sammy,PATH_REPLACER="([^/]+)",PATH_NAME_MATCHER=/:([\w\d]+)/g,QUERY_STRING_MATCHER=/\?([^#]*)?$/,_makeArray=function(nonarray){return Array.prototype.slice.call(nonarray)},_isFunction=function(obj){return Object.prototype.toString.call(obj)==="[object Function]"},_isArray=function(obj){return Object.prototype.toString.call(obj)==="[object Array]"},_isRegExp=function(obj){return Object.prototype.toString.call(obj)==="[object RegExp]"},_decode=function(str){return decodeURIComponent((str||"").replace(/\+/g," "))},_encode=encodeURIComponent,_escapeHTML=function(s){return String(s).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},_routeWrapper=function(verb){return function(){return this.route.apply(this,[verb].concat(Array.prototype.slice.call(arguments)))}},_template_cache={},_has_history=!!(window.history&&history.pushState),loggers=[];Sammy=function(){var args=_makeArray(arguments),app,selector;Sammy.apps=Sammy.apps||{};if(args.length===0||args[0]&&_isFunction(args[0])){return Sammy.apply(Sammy,["body"].concat(args))}else if(typeof(selector=args.shift())=="string"){app=Sammy.apps[selector]||new Sammy.Application;app.element_selector=selector;if(args.length>0){$.each(args,function(i,plugin){app.use(plugin)})}if(app.element_selector!=selector){delete Sammy.apps[selector]}Sammy.apps[app.element_selector]=app;return app}};Sammy.VERSION="0.7.6";Sammy.addLogger=function(logger){loggers.push(logger)};Sammy.log=function(){var args=_makeArray(arguments);args.unshift("["+Date()+"]");$.each(loggers,function(i,logger){logger.apply(Sammy,args)})};if(typeof window.console!="undefined"){if(typeof window.console.log==="function"&&_isFunction(window.console.log.apply)){Sammy.addLogger(function(){window.console.log.apply(window.console,arguments)})}else{Sammy.addLogger(function(){window.console.log(arguments)})}}else if(typeof console!="undefined"){Sammy.addLogger(function(){console.log.apply(console,arguments)})}$.extend(Sammy,{makeArray:_makeArray,isFunction:_isFunction,isArray:_isArray});Sammy.Object=function(obj){return $.extend(this,obj||{})};$.extend(Sammy.Object.prototype,{escapeHTML:_escapeHTML,h:_escapeHTML,toHash:function(){var json={};$.each(this,function(k,v){if(!_isFunction(v)){json[k]=v}});return json},toHTML:function(){var display="";$.each(this,function(k,v){if(!_isFunction(v)){display+="<strong>"+k+"</strong> "+v+"<br />"}});return display},keys:function(attributes_only){var keys=[];for(var property in this){if(!_isFunction(this[property])||!attributes_only){keys.push(property)}}return keys},has:function(key){return this[key]&&$.trim(this[key].toString())!==""},join:function(){var args=_makeArray(arguments);var delimiter=args.shift();return args.join(delimiter)},log:function(){Sammy.log.apply(Sammy,arguments)},toString:function(include_functions){var s=[];$.each(this,function(k,v){if(!_isFunction(v)||include_functions){s.push('"'+k+'": '+v.toString())}});return"Sammy.Object: {"+s.join(",")+"}"}});Sammy.targetIsThisWindow=function targetIsThisWindow(event,tagName){var targetElement=$(event.target).closest(tagName);if(targetElement.length===0){return true}var targetWindow=targetElement.attr("target");if(!targetWindow||targetWindow===window.name||targetWindow==="_self"){return true}if(targetWindow==="_blank"){return false}if(targetWindow==="top"&&window===window.top){return true}return false};Sammy.DefaultLocationProxy=function(app,run_interval_every){this.app=app;this.is_native=false;this.has_history=_has_history;this._startPolling(run_interval_every)};Sammy.DefaultLocationProxy.fullPath=function(location_obj){var matches=location_obj.toString().match(/^[^#]*(#.+)$/);var hash=matches?matches[1]:"";return[location_obj.pathname,location_obj.search,hash].join("")};$.extend(Sammy.DefaultLocationProxy.prototype,{bind:function(){var proxy=this,app=this.app,lp=Sammy.DefaultLocationProxy;$(window).bind("hashchange."+this.app.eventNamespace(),function(e,non_native){if(proxy.is_native===false&&!non_native){proxy.is_native=true;window.clearInterval(lp._interval);lp._interval=null}app.trigger("location-changed")});if(_has_history&&!app.disable_push_state){$(window).bind("popstate."+this.app.eventNamespace(),function(e){app.trigger("location-changed")});$(document).delegate("a","click.history-"+this.app.eventNamespace(),function(e){if(e.isDefaultPrevented()||e.metaKey||e.ctrlKey){return}var full_path=lp.fullPath(this),hostname=this.hostname?this.hostname:function(a){var l=document.createElement("a");l.href=a.href;return l.hostname}(this);if(hostname==window.location.hostname&&app.lookupRoute("get",full_path)&&Sammy.targetIsThisWindow(e,"a")){e.preventDefault();proxy.setLocation(full_path);return false}})}if(!lp._bindings){lp._bindings=0}lp._bindings++},unbind:function(){$(window).unbind("hashchange."+this.app.eventNamespace());$(window).unbind("popstate."+this.app.eventNamespace());$(document).undelegate("a","click.history-"+this.app.eventNamespace());Sammy.DefaultLocationProxy._bindings--;if(Sammy.DefaultLocationProxy._bindings<=0){window.clearInterval(Sammy.DefaultLocationProxy._interval);Sammy.DefaultLocationProxy._interval=null}},getLocation:function(){return Sammy.DefaultLocationProxy.fullPath(window.location)},setLocation:function(new_location){if(/^([^#\/]|$)/.test(new_location)){if(_has_history&&!this.app.disable_push_state){new_location="/"+new_location}else{new_location="#!/"+new_location}}if(new_location!=this.getLocation()){if(_has_history&&!this.app.disable_push_state&&/^\//.test(new_location)){history.pushState({path:new_location},window.title,new_location);this.app.trigger("location-changed")}else{return window.location=new_location}}},_startPolling:function(every){var proxy=this;if(!Sammy.DefaultLocationProxy._interval){if(!every){every=10}var hashCheck=function(){var current_location=proxy.getLocation();if(typeof Sammy.DefaultLocationProxy._last_location=="undefined"||current_location!=Sammy.DefaultLocationProxy._last_location){window.setTimeout(function(){$(window).trigger("hashchange",[true])},0)}Sammy.DefaultLocationProxy._last_location=current_location};hashCheck();Sammy.DefaultLocationProxy._interval=window.setInterval(hashCheck,every)}}});Sammy.Application=function(app_function){var app=this;this.routes={};this.listeners=new Sammy.Object({});this.arounds=[];this.befores=[];this.namespace=(new Date).getTime()+"-"+parseInt(Math.random()*1e3,10);this.context_prototype=function(){Sammy.EventContext.apply(this,arguments)};this.context_prototype.prototype=new Sammy.EventContext;if(_isFunction(app_function)){app_function.apply(this,[this])}if(!this._location_proxy){this.setLocationProxy(new Sammy.DefaultLocationProxy(this,this.run_interval_every))}if(this.debug){this.bindToAllEvents(function(e,data){app.log(app.toString(),e.cleaned_type,data||{})})}};Sammy.Application.prototype=$.extend({},Sammy.Object.prototype,{ROUTE_VERBS:["get","post","put","delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:false,element_selector:"body",debug:false,raise_errors:false,run_interval_every:50,disable_push_state:false,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(selector){return selector?$(this.element_selector).find(selector):$(this.element_selector)},use:function(){var args=_makeArray(arguments),plugin=args.shift(),plugin_name=plugin||"";try{args.unshift(this);if(typeof plugin=="string"){plugin_name="Sammy."+plugin;plugin=Sammy[plugin]}plugin.apply(this,args)}catch(e){if(typeof plugin==="undefined"){this.error("Plugin Error: called use() but plugin ("+plugin_name.toString()+") is not defined",e)}else if(!_isFunction(plugin)){this.error("Plugin Error: called use() but '"+plugin_name.toString()+"' is not a function",e)}else{this.error("Plugin Error",e)}}return this},setLocationProxy:function(new_proxy){var original_proxy=this._location_proxy;this._location_proxy=new_proxy;if(this.isRunning()){if(original_proxy){original_proxy.unbind()}this._location_proxy.bind()}},log:function(){Sammy.log.apply(Sammy,Array.prototype.concat.apply([this.element_selector],arguments))},route:function(verb,path){var app=this,param_names=[],add_route,path_match,callback=Array.prototype.slice.call(arguments,2);if(callback.length===0&&_isFunction(path)){callback=[path];path=verb;verb="any"}verb=verb.toLowerCase();if(path.constructor==String){PATH_NAME_MATCHER.lastIndex=0;while((path_match=PATH_NAME_MATCHER.exec(path))!==null){param_names.push(path_match[1])}path=new RegExp(path.replace(PATH_NAME_MATCHER,PATH_REPLACER)+"$")}$.each(callback,function(i,cb){if(typeof cb==="string"){callback[i]=app[cb]}});add_route=function(with_verb){var r={verb:with_verb,path:path,callback:callback,param_names:param_names};app.routes[with_verb]=app.routes[with_verb]||[];app.routes[with_verb].push(r)};if(verb==="any"){$.each(this.ROUTE_VERBS,function(i,v){add_route(v)})}else{add_route(verb)}return this},get:_routeWrapper("get"),post:_routeWrapper("post"),put:_routeWrapper("put"),del:_routeWrapper("delete"),any:_routeWrapper("any"),mapRoutes:function(route_array){var app=this;$.each(route_array,function(i,route_args){app.route.apply(app,route_args)});return this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(name,data,callback){var app=this;if(typeof callback=="undefined"){callback=data}var listener_callback=function(){var e,context,data;e=arguments[0];data=arguments[1];if(data&&data.context){context=data.context;delete data.context}else{context=new app.context_prototype(app,"bind",e.type,data,e.target)}e.cleaned_type=e.type.replace(app.eventNamespace(),"");callback.apply(context,[e,data])};if(!this.listeners[name]){this.listeners[name]=[]}this.listeners[name].push(listener_callback);if(this.isRunning()){this._listen(name,listener_callback)}return this},trigger:function(name,data){this.$element().trigger([name,this.eventNamespace()].join("."),[data]);return this},refresh:function(){this.last_location=null;this.trigger("location-changed");return this},before:function(options,callback){if(_isFunction(options)){callback=options;options={}}this.befores.push([options,callback]);return this},after:function(callback){return this.bind("event-context-after",callback)},around:function(callback){this.arounds.push(callback);return this},onComplete:function(callback){this._onComplete=callback;return this},isRunning:function(){return this._running},helpers:function(extensions){$.extend(this.context_prototype.prototype,extensions);return this},helper:function(name,method){this.context_prototype.prototype[name]=method;return this},run:function(start_url){if(this.isRunning()){return false}var app=this;$.each(this.listeners.toHash(),function(name,callbacks){$.each(callbacks,function(i,listener_callback){app._listen(name,listener_callback)})});this.trigger("run",{start_url:start_url});this._running=true;this.last_location=null;if(!/\#(.+)/.test(this.getLocation())&&typeof start_url!="undefined"){this.setLocation(start_url)}this._checkLocation();this._location_proxy.bind();this.bind("location-changed",function(){app._checkLocation()});this.bind("submit",function(e){if(!Sammy.targetIsThisWindow(e,"form")){return true}var returned=app._checkFormSubmission($(e.target).closest("form"));return returned===false?e.preventDefault():false});$(window).bind("unload",function(){app.unload()});return this.trigger("changed")},unload:function(){if(!this.isRunning()){return false}var app=this;this.trigger("unload");this._location_proxy.unbind();this.$element().unbind("submit").removeClass(app.eventNamespace());$.each(this.listeners.toHash(),function(name,listeners){$.each(listeners,function(i,listener_callback){app._unlisten(name,listener_callback)})});this._running=false;return this},destroy:function(){this.unload();delete Sammy.apps[this.element_selector];return this},bindToAllEvents:function(callback){var app=this;$.each(this.APP_EVENTS,function(i,e){app.bind(e,callback)});$.each(this.listeners.keys(true),function(i,name){if($.inArray(name,app.APP_EVENTS)==-1){app.bind(name,callback)}});return this},routablePath:function(path){return path.replace(QUERY_STRING_MATCHER,"")},lookupRoute:function(verb,path){var app=this,routed=false,i=0,l,route;if(typeof this.routes[verb]!="undefined"){l=this.routes[verb].length;for(;i<l;i++){route=this.routes[verb][i];if(app.routablePath(path).match(route.path)){routed=route;break}}}return routed},runRoute:function(verb,path,params,target){var app=this,route=this.lookupRoute(verb,path),context,wrapped_route,arounds,around,befores,before,callback_args,path_params,final_returned;if(this.debug){this.log("runRoute",[verb,path].join(" "))}this.trigger("run-route",{verb:verb,path:path,params:params});if(typeof params=="undefined"){params={}}$.extend(params,this._parseQueryString(path));if(route){this.trigger("route-found",{route:route});if((path_params=route.path.exec(this.routablePath(path)))!==null){path_params.shift();$.each(path_params,function(i,param){if(route.param_names[i]){params[route.param_names[i]]=_decode(param)}else{if(!params.splat){params.splat=[]}params.splat.push(_decode(param))}})}context=new this.context_prototype(this,verb,path,params,target);arounds=this.arounds.slice(0);befores=this.befores.slice(0);callback_args=[context];if(params.splat){callback_args=callback_args.concat(params.splat)}wrapped_route=function(){var returned,i,nextRoute;while(befores.length>0){before=befores.shift();if(app.contextMatchesOptions(context,before[0])){returned=before[1].apply(context,[context]);if(returned===false){return false}}}app.last_route=route;context.trigger("event-context-before",{context:context});if(typeof route.callback==="function"){route.callback=[route.callback]}if(route.callback&&route.callback.length){i=-1;nextRoute=function(){i++;if(route.callback[i]){returned=route.callback[i].apply(context,callback_args)}else if(app._onComplete&&typeof(app._onComplete==="function")){app._onComplete(context)}};callback_args.push(nextRoute);nextRoute()}context.trigger("event-context-after",{context:context});return returned};$.each(arounds.reverse(),function(i,around){var last_wrapped_route=wrapped_route;wrapped_route=function(){return around.apply(context,[last_wrapped_route])}});try{final_returned=wrapped_route()}catch(e){this.error(["500 Error",verb,path].join(" "),e)}return final_returned}else{return this.notFound(verb,path)}},contextMatchesOptions:function(context,match_options,positive){var options=match_options;if(typeof options==="string"||_isRegExp(options)){options={path:options}}if(typeof positive==="undefined"){positive=true}if($.isEmptyObject(options)){return true}if(_isArray(options.path)){var results,numopt,opts,len;results=[];for(numopt=0,len=options.path.length;numopt<len;numopt+=1){opts=$.extend({},options,{path:options.path[numopt]});results.push(this.contextMatchesOptions(context,opts))}var matched=$.inArray(true,results)>-1?true:false;return positive?matched:!matched}if(options.only){return this.contextMatchesOptions(context,options.only,true)}else if(options.except){return this.contextMatchesOptions(context,options.except,false)}var path_matched=true,verb_matched=true;if(options.path){if(!_isRegExp(options.path)){options.path=new RegExp(options.path.toString()+"$")}path_matched=options.path.test(context.path)}if(options.verb){if(typeof options.verb==="string"){verb_matched=options.verb===context.verb}else{verb_matched=options.verb.indexOf(context.verb)>-1}}return positive?verb_matched&&path_matched:!(verb_matched&&path_matched)},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(new_location){return this._location_proxy.setLocation(new_location)},swap:function(content,callback){var $el=this.$element().html(content);if(_isFunction(callback)){callback(content)}return $el},templateCache:function(key,value){if(typeof value!="undefined"){return _template_cache[key]=value}else{return _template_cache[key]}},clearTemplateCache:function(){return _template_cache={}},notFound:function(verb,path){var ret=this.error(["404 Not Found",verb,path].join(" "));return verb==="get"?ret:true},error:function(message,original_error){if(!original_error){original_error=new Error}original_error.message=[message,original_error.message].join(" ");this.trigger("error",{message:original_error.message,error:original_error});if(this.raise_errors){throw original_error}else{this.log(original_error.message,original_error)}},_checkLocation:function(){var location,returned;location=this.getLocation();if(!this.last_location||this.last_location[0]!="get"||this.last_location[1]!=location){this.last_location=["get",location];returned=this.runRoute("get",location)}return returned},_getFormVerb:function(form){var $form=$(form),verb,$_method;$_method=$form.find('input[name="_method"]');if($_method.length>0){verb=$_method.val()}if(!verb){verb=$form[0].getAttribute("method")}if(!verb||verb===""){verb="get"}return $.trim(verb.toString().toLowerCase())},_checkFormSubmission:function(form){var $form,path,verb,params,returned;this.trigger("check-form-submission",{form:form});$form=$(form);path=$form.attr("action")||"";verb=this._getFormVerb($form);if(this.debug){this.log("_checkFormSubmission",$form,path,verb)}if(verb==="get"){params=this._serializeFormParams($form);if(params!==""){path+="?"+params}this.setLocation(path);returned=false}else{params=$.extend({},this._parseFormParams($form));returned=this.runRoute(verb,path,params,form.get(0))}return typeof returned=="undefined"?false:returned},_serializeFormParams:function($form){var queryString="",fields=$form.serializeArray(),i;if(fields.length>0){queryString=this._encodeFormPair(fields[0].name,fields[0].value);for(i=1;i<fields.length;i++){queryString=queryString+"&"+this._encodeFormPair(fields[i].name,fields[i].value)}}return queryString},_encodeFormPair:function(name,value){return _encode(name)+"="+_encode(value)},_parseFormParams:function($form){var params={},form_fields=$form.serializeArray(),i;for(i=0;i<form_fields.length;i++){params=this._parseParamPair(params,form_fields[i].name,form_fields[i].value)}return params},_parseQueryString:function(path){var params={},parts,pairs,pair,i;parts=path.match(QUERY_STRING_MATCHER);if(parts&&parts[1]){pairs=parts[1].split("&");for(i=0;i<pairs.length;i++){pair=pairs[i].split("=");params=this._parseParamPair(params,_decode(pair[0]),_decode(pair[1]||""))}}return params},_parseParamPair:function(params,key,value){if(typeof params[key]!=="undefined"){if(_isArray(params[key])){params[key].push(value)}else{params[key]=[params[key],value]}}else{params[key]=value}return params},_listen:function(name,callback){return this.$element().bind([name,this.eventNamespace()].join("."),callback)},_unlisten:function(name,callback){return this.$element().unbind([name,this.eventNamespace()].join("."),callback)}});Sammy.RenderContext=function(event_context){this.event_context=event_context;this.callbacks=[];this.previous_content=null;this.content=null;this.next_engine=false;this.waiting=false};Sammy.RenderContext.prototype=$.extend({},Sammy.Object.prototype,{then:function(callback){if(!_isFunction(callback)){if(typeof callback==="string"&&callback in this.event_context){var helper=this.event_context[callback];callback=function(content){return helper.apply(this.event_context,[content])}}else{return this}}var context=this;if(this.waiting){this.callbacks.push(callback)}else{this.wait();window.setTimeout(function(){var returned=callback.apply(context,[context.content,context.previous_content]);if(returned!==false){context.next(returned)}},0)}return this},wait:function(){this.waiting=true},next:function(content){this.waiting=false;if(typeof content!=="undefined"){this.previous_content=this.content;this.content=content}if(this.callbacks.length>0){this.then(this.callbacks.shift())}},load:function(location,options,callback){var context=this;return this.then(function(){var should_cache,cached,is_json,location_array;if(_isFunction(options)){callback=options;options={}}else{options=$.extend({},options)}if(callback){this.then(callback)}if(typeof location==="string"){is_json=location.match(/\.json(\?|$)/)||options.json;should_cache=is_json?options.cache===true:options.cache!==false;context.next_engine=context.event_context.engineFor(location);delete options.cache;delete options.json;if(options.engine){context.next_engine=options.engine;delete options.engine}if(should_cache&&(cached=this.event_context.app.templateCache(location))){return cached}this.wait();$.ajax($.extend({url:location,data:{},dataType:is_json?"json":"text",type:"get",success:function(data){if(should_cache){context.event_context.app.templateCache(location,data)}context.next(data)}},options));return false}else{if(location.nodeType){return location.innerHTML}if(location.selector){context.next_engine=location.attr("data-engine");if(options.clone===false){return location.remove()[0].innerHTML.toString()}else{return location[0].innerHTML.toString()}}}})},loadPartials:function(partials){var name;if(partials){this.partials=this.partials||{};for(name in partials){(function(context,name){context.load(partials[name]).then(function(template){this.partials[name]=template})})(this,name)}}return this},render:function(location,data,callback,partials){if(_isFunction(location)&&!data){return this.then(location)}else{if(_isFunction(data)){partials=callback;callback=data;data=null}else if(callback&&!_isFunction(callback)){partials=callback;callback=null}return this.loadPartials(partials).load(location).interpolate(data,location).then(callback)}},partial:function(location,data,callback,partials){if(_isFunction(callback)){return this.render(location,data,partials).swap(callback)}else if(_isFunction(data)){return this.render(location,{},callback).swap(data)}else{return this.render(location,data,callback).swap()}},send:function(){var context=this,args=_makeArray(arguments),fun=args.shift();if(_isArray(args[0])){args=args[0]}return this.then(function(content){args.push(function(response){context.next(response)});context.wait();fun.apply(fun,args);return false})},collect:function(array,callback,now){var context=this;var coll=function(){if(_isFunction(array)){callback=array;array=this.content}var contents=[],doms=false;$.each(array,function(i,item){var returned=callback.apply(context,[i,item]);if(returned.jquery&&returned.length==1){returned=returned[0];doms=true}contents.push(returned);return returned});return doms?contents:contents.join("")};return now?coll():this.then(coll)},renderEach:function(location,name,data,callback){if(_isArray(name)){callback=data;data=name;name=null}return this.load(location).then(function(content){var rctx=this;if(!data){data=_isArray(this.previous_content)?this.previous_content:[]}if(callback){$.each(data,function(i,value){var idata={},engine=this.next_engine||location;if(name){idata[name]=value}else{idata=value}callback(value,rctx.event_context.interpolate(content,idata,engine))})}else{return this.collect(data,function(i,value){var idata={},engine=this.next_engine||location;if(name){idata[name]=value}else{idata=value}return this.event_context.interpolate(content,idata,engine)},true)}})},interpolate:function(data,engine,retain){var context=this;return this.then(function(content,prev){if(!data&&prev){data=prev}if(this.next_engine){engine=this.next_engine;this.next_engine=false}var rendered=context.event_context.interpolate(content,data,engine,this.partials);return retain?prev+rendered:rendered})},swap:function(callback){return this.then(function(content){this.event_context.swap(content,callback);return content}).trigger("changed",{})},appendTo:function(selector){return this.then(function(content){$(selector).append(content)}).trigger("changed",{})},prependTo:function(selector){return this.then(function(content){$(selector).prepend(content)}).trigger("changed",{})},replace:function(selector){return this.then(function(content){$(selector).html(content)}).trigger("changed",{})},trigger:function(name,data){return this.then(function(content){if(typeof data=="undefined"){data={content:content}}this.event_context.trigger(name,data);return content})}});Sammy.EventContext=function(app,verb,path,params,target){this.app=app;this.verb=verb;this.path=path;this.params=new Sammy.Object(params);this.target=target};Sammy.EventContext.prototype=$.extend({},Sammy.Object.prototype,{$element:function(){return this.app.$element(_makeArray(arguments).shift())},engineFor:function(engine){var context=this,engine_match;if(_isFunction(engine)){return engine}engine=(engine||context.app.template_engine).toString();if(engine_match=engine.match(/\.([^\.\?\#]+)(\?|$)/)){engine=engine_match[1]}if(engine&&_isFunction(context[engine])){return context[engine]}if(context.app.template_engine){return this.engineFor(context.app.template_engine)}return function(content,data){return content}},interpolate:function(content,data,engine,partials){return this.engineFor(engine).apply(this,[content,data,partials])},render:function(location,data,callback,partials){return new Sammy.RenderContext(this).render(location,data,callback,partials)},renderEach:function(location,name,data,callback){return new Sammy.RenderContext(this).renderEach(location,name,data,callback)},load:function(location,options,callback){return new Sammy.RenderContext(this).load(location,options,callback)},loadPartials:function(partials){return new Sammy.RenderContext(this).loadPartials(partials)},partial:function(location,data,callback,partials){return new Sammy.RenderContext(this).partial(location,data,callback,partials)},send:function(){var rctx=new Sammy.RenderContext(this);return rctx.send.apply(rctx,arguments)},redirect:function(){var to,args=_makeArray(arguments),current_location=this.app.getLocation(),l=args.length;if(l>1){var i=0,paths=[],pairs=[],params={},has_params=false;for(;i<l;i++){if(typeof args[i]=="string"){paths.push(args[i])}else{$.extend(params,args[i]);has_params=true}}to=paths.join("/");if(has_params){for(var k in params){pairs.push(this.app._encodeFormPair(k,params[k]))}to+="?"+pairs.join("&")}}else{to=args[0]}this.trigger("redirect",{to:to});this.app.last_location=[this.verb,this.path];this.app.setLocation(to);if(new RegExp(to).test(current_location)){this.app.trigger("location-changed")}},trigger:function(name,data){if(typeof data=="undefined"){data={}}if(!data.context){data.context=this}return this.app.trigger(name,data)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(contents,callback){return this.app.swap(contents,callback)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(string){return $.parseJSON(string)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}});return Sammy});        20190718161435                          Fj      Fj    Fj  / /   - -   S a m m y . j s   - -   / s a m m y . j s 
 / /   h t t p : / / s a m m y j s . o r g 
 / /   V e r s i o n :   0 . 7 . 6 
 / /   B u i l t :   2 0 1 4 - 0 8 - 2 6   1 0 : 4 5 : 3 4   + 0 3 0 0 
 ( f u n c t i o n ( f a c t o r y ) { i f ( t y p e o f   d e f i n e = = = " f u n c t i o n " & & d e f i n e . a m d ) { d e f i n e ( [ " j q u e r y " ] , f a c t o r y ) } e l s e { j Q u e r y . s a m m y = w i n d o w . S a m m y = f a c t o r y ( j Q u e r y ) } } ) ( f u n c t i o n ( $ ) { v a r   S a m m y , P A T H _ R E P L A C E R = " ( [ ^ / ] + ) " , P A T H _ N A M E _ M A T C H E R = / : ( [ \ w \ d ] + ) / g , Q U E R Y _ S T R I N G _ M A T C H E R = / \ ? ( [ ^ # ] * ) ? $ / , _ m a k e A r r a y = f u n c t i o n ( n o n a r r a y ) { r e t u r n   A r r a y . p r o t o t y p e . s l i c e . c a l l ( n o n a r r a y ) } , _ i s F u n c t i o n = f u n c t i o n ( o b j ) { r e t u r n   O b j e c t . p r o t o t y p e . t o S t r i n g . c a l l ( o b j ) = = = " [ o b j e c t   F u n c t i o n ] " } , _ i s A r r a y = f u n c t i o n ( o b j ) { r e t u r n   O b j e c t . p r o t o t y p e . t o S t r i n g . c a l l ( o b j ) = = = " [ o b j e c t   A r r a y ] " } , _ i s R e g E x p = f u n c t i o n ( o b j ) { r e t u r n   O b j e c t . p r o t o t y p e . t o S t r i n g . c a l l ( o b j ) = = = " [ o b j e c t   R e g E x p ] " } , _ d e c o d e = f u n c t i o n ( s t r ) { r e t u r n   d e c o d e U R I C o m p o n e n t ( ( s t r | | " " ) . r e p l a c e ( / \ + / g , "   " ) ) } , _ e n c o d e = e n c o d e U R I C o m p o n e n t , _ e s c a p e H T M L = f u n c t i o n ( s ) { r e t u r n   S t r i n g ( s ) . r e p l a c e ( / & ( ? ! \ w + ; ) / g , " & a m p ; " ) . r e p l a c e ( / < / g , " & l t ; " ) . r e p l a c e ( / > / g , " & g t ; " ) . r e p l a c e ( / " / g , " & q u o t ; " ) } , _ r o u t e W r a p p e r = f u n c t i o n ( v e r b ) { r e t u r n   f u n c t i o n ( ) { r e t u r n   t h i s . r o u t e . a p p l y ( t h i s , [ v e r b ] . c o n c a t ( A r r a y . p r o t o t y p e . s l i c e . c a l l ( a r g u m e n t s ) ) ) } } , _ t e m p l a t e _ c a c h e = { } , _ h a s _ h i s t o r y = ! ! ( w i n d o w . h i s t o r y & & h i s t o r y . p u s h S t a t e ) , l o g g e r s = [ ] ; S a m m y = f u n c t i o n ( ) { v a r   a r g s = _ m a k e A r r a y ( a r g u m e n t s ) , a p p , s e l e c t o r ; S a m m y . a p p s = S a m m y . a p p s | | { } ; i f ( a r g s . l e n g t h = = = 0 | | a r g s [ 0 ] & & _ i s F u n c t i o n ( a r g s [ 0 ] ) ) { r e t u r n   S a m m y . a p p l y ( S a m m y , [ " b o d y " ] . c o n c a t ( a r g s ) ) } e l s e   i f ( t y p e o f ( s e l e c t o r = a r g s . s h i f t ( ) ) = = " s t r i n g " ) { a p p = S a m m y . a p p s [ s e l e c t o r ] | | n e w   S a m m y . A p p l i c a t i o n ; a p p . e l e m e n t _ s e l e c t o r = s e l e c t o r ; i f ( a r g s . l e n g t h > 0 ) { $ . e a c h ( a r g s , f u n c t i o n ( i , p l u g i n ) { a p p . u s e ( p l u g i n ) } ) } i f ( a p p . e l e m e n t _ s e l e c t o r ! = s e l e c t o r ) { d e l e t e   S a m m y . a p p s [ s e l e c t o r ] } S a m m y . a p p s [ a p p . e l e m e n t _ s e l e c t o r ] = a p p ; r e t u r n   a p p } } ; S a m m y . V E R S I O N = " 0 . 7 . 6 " ; S a m m y . a d d L o g g e r = f u n c t i o n ( l o g g e r ) { l o g g e r s . p u s h ( l o g g e r ) } ; S a m m y . l o g = f u n c t i o n ( ) { v a r   a r g s = _ m a k e A r r a y ( a r g u m e n t s ) ; a r g s . u n s h i f t ( " [ " + D a t e ( ) + " ] " ) ; $ . e a c h ( l o g g e r s , f u n c t i o n ( i , l o g g e r ) { l o g g e r . a p p l y ( S a m m y , a r g s ) } ) } ; i f ( t y p e o f   w i n d o w . c o n s o l e ! = " u n d e f i n e d " ) { i f ( t y p e o f   w i n d o w . c o n s o l e . l o g = = = " f u n c t i o n " & & _ i s F u n c t i o n ( w i n d o w . c o n s o l e . l o g . a p p l y ) ) { S a m m y . a d d L o g g e r ( f u n c t i o n ( ) { w i n d o w . c o n s o l e . l o g . a p p l y ( w i n d o w . c o n s o l e , a r g u m e n t s ) } ) } e l s e { S a m m y . a d d L o g g e r ( f u n c t i o n ( ) { w i n d o w . c o n s o l e . l o g ( a r g u m e n t s ) } ) } } e l s e   i f ( t y p e o f   c o n s o l e ! = " u n d e f i n e d " ) { S a m m y . a d d L o g g e r ( f u n c t i o n ( ) { c o n s o l e . l o g . a p p l y ( c o n s o l e , a r g u m e n t s ) } ) } $ . e x t e n d ( S a m m y , { m a k e A r r a y : _ m a k e A r r a y , i s F u n c t i o n : _ i s F u n c t i o n , i s A r r a y : _ i s A r r a y } ) ; S a m m y . O b j e c t = f u n c t i o n ( o b j ) { r e t u r n   $ . e x t e n d ( t h i s , o b j | | { } ) } ; $ . e x t e n d ( S a m m y . O b j e c t . p r o t o t y p e , { e s c a p e H T M L : _ e s c a p e H T M L , h : _ e s c a p e H T M L , t o H a s h : f u n c t i o n ( ) { v a r   j s o n = { } ; $ . e a c h ( t h i s , f u n c t i o n ( k , v ) { i f ( ! _ i s F u n c t i o n ( v ) ) { j s o n [ k ] = v } } ) ; r e t u r n   j s o n } , t o H T M L : f u n c t i o n ( ) { v a r   d i s p l a y = " " ; $ . e a c h ( t h i s , f u n c t i o n ( k , v ) { i f ( ! _ i s F u n c t i o n ( v ) ) { d i s p l a y + = " < s t r o n g > " + k + " < / s t r o n g >   " + v + " < b r   / > " } } ) ; r e t u r n   d i s p l a y } , k e y s : f u n c t i o n ( a t t r i b u t e s _ o n l y ) { v a r   k e y s = [ ] ; f o r ( v a r   p r o p e r t y   i n   t h i s ) { i f ( ! _ i s F u n c t i o n ( t h i s [ p r o p e r t y ] ) | | ! a t t r i b u t e s _ o n l y ) { k e y s . p u s h ( p r o p e r t y ) } } r e t u r n   k e y s } , h a s : f u n c t i o n ( k e y ) { r e t u r n   t h i s [ k e y ] & & $ . t r i m ( t h i s [ k e y ] . t o S t r i n g ( ) ) ! = = " " } , j o i n : f u n c t i o n ( ) { v a r   a r g s = _ m a k e A r r a y ( a r g u m e n t s ) ; v a r   d e l i m i t e r = a r g s . s h i f t ( ) ; r e t u r n   a r g s . j o i n ( d e l i m i t e r ) } , l o g : f u n c t i o n ( ) { S a m m y . l o g . a p p l y ( S a m m y , a r g u m e n t s ) } , t o S t r i n g : f u n c t i o n ( i n c l u d e _ f u n c t i o n s ) { v a r   s = [ ] ; $ . e a c h ( t h i s , f u n c t i o n ( k , v ) { i f ( ! _ i s F u n c t i o n ( v ) | | i n c l u d e _ f u n c t i o n s ) { s . p u s h ( ' " ' + k + ' " :   ' + v . t o S t r i n g ( ) ) } } ) ; r e t u r n " S a m m y . O b j e c t :   { " + s . j o i n ( " , " ) + " } " } } ) ; S a m m y . t a r g e t I s T h i s W i n d o w = f u n c t i o n   t a r g e t I s T h i s W i n d o w ( e v e n t , t a g N a m e ) { v a r   t a r g e t E l e m e n t = $ ( e v e n t . t a r g e t ) . c l o s e s t ( t a g N a m e ) ; i f ( t a r g e t E l e m e n t . l e n g t h = = = 0 ) { r e t u r n   t r u e } v a r   t a r g e t W i n d o w = t a r g e t E l e m e n t . a t t r ( " t a r g e t " ) ; i f ( ! t a r g e t W i n d o w | | t a r g e t W i n d o w = = = w i n d o w . n a m e | | t a r g e t W i n d o w = = = " _ s e l f " ) { r e t u r n   t r u e } i f ( t a r g e t W i n d o w = = = " _ b l a n k " ) { r e t u r n   f a l s e } i f ( t a r g e t W i n d o w = = = " t o p " & & w i n d o w = = = w i n d o w . t o p ) { r e t u r n   t r u e } r e t u r n   f a l s e } ; S a m m y . D e f a u l t L o c a t i o n P r o x y = f u n c t i o n ( a p p , r u n _ i n t e r v a l _ e v e r y ) { t h i s . a p p = a p p ; t h i s . i s _ n a t i v e = f a l s e ; t h i s . h a s _ h i s t o r y = _ h a s _ h i s t o r y ; t h i s . _ s t a r t P o l l i n g ( r u n _ i n t e r v a l _ e v e r y ) } ; S a m m y . D e f a u l t L o c a t i o n P r o x y . f u l l P a t h = f u n c t i o n ( l o c a t i o n _ o b j ) { v a r   m a t c h e s = l o c a t i o n _ o b j . t o S t r i n g ( ) . m a t c h ( / ^ [ ^ # ] * ( # . + ) $ / ) ; v a r   h a s h = m a t c h e s ? m a t c h e s [ 1 ] : " " ; r e t u r n [ l o c a t i o n _ o b j . p a t h n a m e , l o c a t i o n _ o b j . s e a r c h , h a s h ] . j o i n ( " " ) } ; $ . e x t e n d ( S a m m y . D e f a u l t L o c a t i o n P r o x y . p r o t o t y p e , { b i n d : f u n c t i o n ( ) { v a r   p r o x y = t h i s , a p p = t h i s . a p p , l p = S a m m y . D e f a u l t L o c a t i o n P r o x y ; $ ( w i n d o w ) . b i n d ( " h a s h c h a n g e . " + t h i s . a p p . e v e n t N a m e s p a c e ( ) , f u n c t i o n ( e , n o n _ n a t i v e ) { i f ( p r o x y . i s _ n a t i v e = = = f a l s e & & ! n o n _ n a t i v e ) { p r o x y . i s _ n a t i v e = t r u e ; w i n d o w . c l e a r I n t e r v a l ( l p . _ i n t e r v a l ) ; l p . _ i n t e r v a l = n u l l } a p p . t r i g g e r ( " l o c a t i o n - c h a n g e d " ) } ) ; i f ( _ h a s _ h i s t o r y & & ! a p p . d i s a b l e _ p u s h _ s t a t e ) { $ ( w i n d o w ) . b i n d ( " p o p s t a t e . " + t h i s . a p p . e v e n t N a m e s p a c e ( ) , f u n c t i o n ( e ) { a p p . t r i g g e r ( " l o c a t i o n - c h a n g e d " ) } ) ; $ ( d o c u m e n t ) . d e l e g a t e ( " a " , " c l i c k . h i s t o r y - " + t h i s . a p p . e v e n t N a m e s p a c e ( ) , f u n c t i o n ( e ) { i f ( e . i s D e f a u l t P r e v e n t e d ( ) | | e . m e t a K e y | | e . c t r l K e y ) { r e t u r n } v a r   f u l l _ p a t h = l p . f u l l P a t h ( t h i s ) , h o s t n a m e = t h i s . h o s t n a m e ? t h i s . h o s t n a m e : f u n c t i o n ( a ) { v a r   l = d o c u m e n t . c r e a t e E l e m e n t ( " a " ) ; l . h r e f = a . h r e f ; r e t u r n   l . h o s t n a m e } ( t h i s ) ; i f ( h o s t n a m e = = w i n d o w . l o c a t i o n . h o s t n a m e & & a p p . l o o k u p R o u t e ( " g e t " , f u l l _ p a t h ) & & S a m m y . t a r g e t I s T h i s W i n d o w ( e , " a " ) ) { e . p r e v e n t D e f a u l t ( ) ; p r o x y . s e t L o c a t i o n ( f u l l _ p a t h ) ; r e t u r n   f a l s e } } ) } i f ( ! l p . _ b i n d i n g s ) { l p . _ b i n d i n g s = 0 } l p . _ b i n d i n g s + + } , u n b i n d : f u n c t i o n ( ) { $ ( w i n d o w ) . u n b i n d ( " h a s h c h a n g e . " + t h i s . a p p . e v e n t N a m e s p a c e ( ) ) ; $ ( w i n d o w ) . u n b i n d ( " p o p s t a t e . " + t h i s . a p p . e v e n t N a m e s p a c e ( ) ) ; $ ( d o c u m e n t ) . u n d e l e g a t e ( " a " , " c l i c k . h i s t o r y - " + t h i s . a p p . e v e n t N a m e s p a c e ( ) ) ; S a m m y . D e f a u l t L o c a t i o n P r o x y . _ b i n d i n g s - - ; i f ( S a m m y . D e f a u l t L o c a t i o n P r o x y . _ b i n d i n g s < = 0 ) { w i n d o w . c l e a r I n t e r v a l ( S a m m y . D e f a u l t L o c a t i o n P r o x y . _ i n t e r v a l ) ; S a m m y . D e f a u l t L o c a t i o n P r o x y . _ i n t e r v a l = n u l l } } , g e t L o c a t i o n : f u n c t i o n ( ) { r e t u r n   S a m m y . D e f a u l t L o c a t i o n P r o x y . f u l l P a t h ( w i n d o w . l o c a t i o n ) } , s e t L o c a t i o n : f u n c t i o n ( n e w _ l o c a t i o n ) { i f ( / ^ ( [ ^ # \ / ] | $ ) / . t e s t ( n e w _ l o c a t i o n ) ) { i f ( _ h a s _ h i s t o r y & & ! t h i s . a p p . d i s a b l e _ p u s h _ s t a t e ) { n e w _ l o c a t i o n = " / " + n e w _ l o c a t i o n } e l s e { n e w _ l o c a t i o n = " # ! / " + n e w _ l o c a t i o n } } i f ( n e w _ l o c a t i o n ! = t h i s . g e t L o c a t i o n ( ) ) { i f ( _ h a s _ h i s t o r y & & ! t h i s . a p p . d i s a b l e _ p u s h _ s t a t e & & / ^ \ / / . t e s t ( n e w _ l o c a t i o n ) ) { h i s t o r y . p u s h S t a t e ( { p a t h : n e w _ l o c a t i o n } , w i n d o w . t i t l e , n e w _ l o c a t i o n ) ; t h i s . a p p . t r i g g e r ( " l o c a t i o n - c h a n g e d " ) } e l s e { r e t u r n   w i n d o w . l o c a t i o n = n e w _ l o c a t i o n } } } , _ s t a r t P o l l i n g : f u n c t i o n ( e v e r y ) { v a r   p r o x y = t h i s ; i f ( ! S a m m y . D e f a u l t L o c a t i o n P r o x y . _ i n t e r v a l ) { i f ( ! e v e r y ) { e v e r y = 1 0 } v a r   h a s h C h e c k = f u n c t i o n ( ) { v a r   c u r r e n t _ l o c a t i o n = p r o x y . g e t L o c a t i o n ( ) ; i f ( t y p e o f   S a m m y . D e f a u l t L o c a t i o n P r o x y . _ l a s t _ l o c a t i o n = = " u n d e f i n e d " | | c u r r e n t _ l o c a t i o n ! = S a m m y . D e f a u l t L o c a t i o n P r o x y . _ l a s t _ l o c a t i o n ) { w i n d o w . s e t T i m e o u t ( f u n c t i o n ( ) { $ ( w i n d o w ) . t r i g g e r ( " h a s h c h a n g e " , [ t r u e ] ) } , 0 ) } S a m m y . D e f a u l t L o c a t i o n P r o x y . _ l a s t _ l o c a t i o n = c u r r e n t _ l o c a t i o n } ; h a s h C h e c k ( ) ; S a m m y . D e f a u l t L o c a t i o n P r o x y . _ i n t e r v a l = w i n d o w . s e t I n t e r v a l ( h a s h C h e c k , e v e r y ) } } } ) ; S a m m y . A p p l i c a t i o n = f u n c t i o n ( a p p _ f u n c t i o n ) { v a r   a p p = t h i s ; t h i s . r o u t e s = { } ; t h i s . l i s t e n e r s = n e w   S a m m y . O b j e c t ( { } ) ; t h i s . a r o u n d s = [ ] ; t h i s . b e f o r e s = [ ] ; t h i s . n a m e s p a c e = ( n e w   D a t e ) . g e t T i m e ( ) + " - " + p a r s e I n t ( M a t h . r a n d o m ( ) * 1 e 3 , 1 0 ) ; t h i s . c o n t e x t _ p r o t o t y p e = f u n c t i o n ( ) { S a m m y . E v e n t C o n t e x t . a p p l y ( t h i s , a r g u m e n t s ) } ; t h i s . c o n t e x t _ p r o t o t y p e . p r o t o t y p e = n e w   S a m m y . E v e n t C o n t e x t ; i f ( _ i s F u n c t i o n ( a p p _ f u n c t i o n ) ) { a p p _ f u n c t i o n . a p p l y ( t h i s , [ t h i s ] ) } i f ( ! t h i s . _ l o c a t i o n _ p r o x y ) { t h i s . s e t L o c a t i o n P r o x y ( n e w   S a m m y . D e f a u l t L o c a t i o n P r o x y ( t h i s , t h i s . r u n _ i n t e r v a l _ e v e r y ) ) } i f ( t h i s . d e b u g ) { t h i s . b i n d T o A l l E v e n t s ( f u n c t i o n ( e , d a t a ) { a p p . l o g ( a p p . t o S t r i n g ( ) , e . c l e a n e d _ t y p e , d a t a | | { } ) } ) } } ; S a m m y . A p p l i c a t i o n . p r o t o t y p e = $ . e x t e n d ( { } , S a m m y . O b j e c t . p r o t o t y p e , { R O U T E _ V E R B S : [ " g e t " , " p o s t " , " p u t " , " d e l e t e " ] , A P P _ E V E N T S : [ " r u n " , " u n l o a d " , " l o o k u p - r o u t e " , " r u n - r o u t e " , " r o u t e - f o u n d " , " e v e n t - c o n t e x t - b e f o r e " , " e v e n t - c o n t e x t - a f t e r " , " c h a n g e d " , " e r r o r " , " c h e c k - f o r m - s u b m i s s i o n " , " r e d i r e c t " , " l o c a t i o n - c h a n g e d " ] , _ l a s t _ r o u t e : n u l l , _ l o c a t i o n _ p r o x y : n u l l , _ r u n n i n g : f a l s e , e l e m e n t _ s e l e c t o r : " b o d y " , d e b u g : f a l s e , r a i s e _ e r r o r s : f a l s e , r u n _ i n t e r v a l _ e v e r y : 5 0 , d i s a b l e _ p u s h _ s t a t e : f a l s e , t e m p l a t e _ e n g i n e : n u l l , t o S t r i n g : f u n c t i o n ( ) { r e t u r n " S a m m y . A p p l i c a t i o n : " + t h i s . e l e m e n t _ s e l e c t o r } , $ e l e m e n t : f u n c t i o n ( s e l e c t o r ) { r e t u r n   s e l e c t o r ? $ ( t h i s . e l e m e n t _ s e l e c t o r ) . f i n d ( s e l e c t o r ) : $ ( t h i s . e l e m e n t _ s e l e c t o r ) } , u s e : f u n c t i o n ( ) { v a r   a r g s = _ m a k e A r r a y ( a r g u m e n t s ) , p l u g i n = a r g s . s h i f t ( ) , p l u g i n _ n a m e = p l u g i n | | " " ; t r y { a r g s . u n s h i f t ( t h i s ) ; i f ( t y p e o f   p l u g i n = = " s t r i n g " ) { p l u g i n _ n a m e = " S a m m y . " + p l u g i n ; p l u g i n = S a m m y [ p l u g i n ] } p l u g i n . a p p l y ( t h i s , a r g s ) } c a t c h ( e ) { i f ( t y p e o f   p l u g i n = = = " u n d e f i n e d " ) { t h i s . e r r o r ( " P l u g i n   E r r o r :   c a l l e d   u s e ( )   b u t   p l u g i n   ( " + p l u g i n _ n a m e . t o S t r i n g ( ) + " )   i s   n o t   d e f i n e d " , e ) } e l s e   i f ( ! _ i s F u n c t i o n ( p l u g i n ) ) { t h i s . e r r o r ( " P l u g i n   E r r o r :   c a l l e d   u s e ( )   b u t   ' " + p l u g i n _ n a m e . t o S t r i n g ( ) + " '   i s   n o t   a   f u n c t i o n " , e ) } e l s e { t h i s . e r r o r ( " P l u g i n   E r r o r " , e ) } } r e t u r n   t h i s } , s e t L o c a t i o n P r o x y : f u n c t i o n ( n e w _ p r o x y ) { v a r   o r i g i n a l _ p r o x y = t h i s . _ l o c a t i o n _ p r o x y ; t h i s . _ l o c a t i o n _ p r o x y = n e w _ p r o x y ; i f ( t h i s . i s R u n n i n g ( ) ) { i f ( o r i g i n a l _ p r o x y ) { o r i g i n a l _ p r o x y . u n b i n d ( ) } t h i s . _ l o c a t i o n _ p r o x y . b i n d ( ) } } , l o g : f u n c t i o n ( ) { S a m m y . l o g . a p p l y ( S a m m y , A r r a y . p r o t o t y p e . c o n c a t . a p p l y ( [ t h i s . e l e m e n t _ s e l e c t o r ] , a r g u m e n t s ) ) } , r o u t e : f u n c t i o n ( v e r b , p a t h ) { v a r   a p p = t h i s , p a r a m _ n a m e s = [ ] , a d d _ r o u t e , p a t h _ m a t c h , c a l l b a c k = A r r a y . p r o t o t y p e . s l i c e . c a l l ( a r g u m e n t s , 2 ) ; i f ( c a l l b a c k . l e n g t h = = = 0 & & _ i s F u n c t i o n ( p a t h ) ) { c a l l b a c k = [ p a t h ] ; p a t h = v e r b ; v e r b = " a n y " } v e r b = v e r b . t o L o w e r C a s e ( ) ; i f ( p a t h . c o n s t r u c t o r = = S t r i n g ) { P A T H _ N A M E _ M A T C H E R . l a s t I n d e x = 0 ; w h i l e ( ( p a t h _ m a t c h = P A T H _ N A M E _ M A T C H E R . e x e c ( p a t h ) ) ! = = n u l l ) { p a r a m _ n a m e s . p u s h ( p a t h _ m a t c h [ 1 ] ) } p a t h = n e w   R e g E x p ( p a t h . r e p l a c e ( P A T H _ N A M E _ M A T C H E R , P A T H _ R E P L A C E R ) + " $ " ) } $ . e a c h ( c a l l b a c k , f u n c t i o n ( i , c b ) { i f ( t y p e o f   c b = = = " s t r i n g " ) { c a l l b a c k [ i ] = a p p [ c b ] } } ) ; a d d _ r o u t e = f u n c t i o n ( w i t h _ v e r b ) { v a r   r = { v e r b : w i t h _ v e r b , p a t h : p a t h , c a l l b a c k : c a l l b a c k , p a r a m _ n a m e s : p a r a m _ n a m e s } ; a p p . r o u t e s [ w i t h _ v e r b ] = a p p . r o u t e s [ w i t h _ v e r b ] | | [ ] ; a p p . r o u t e s [ w i t h _ v e r b ] . p u s h ( r ) } ; i f ( v e r b = = = " a n y " ) { $ . e a c h ( t h i s . R O U T E _ V E R B S , f u n c t i o n ( i , v ) { a d d _ r o u t e ( v ) } ) } e l s e { a d d _ r o u t e ( v e r b ) } r e t u r n   t h i s } , g e t : _ r o u t e W r a p p e r ( " g e t " ) , p o s t : _ r o u t e W r a p p e r ( " p o s t " ) , p u t : _ r o u t e W r a p p e r ( " p u t " ) , d e l : _ r o u t e W r a p p e r ( " d e l e t e " ) , a n y : _ r o u t e W r a p p e r ( " a n y " ) , m a p R o u t e s : f u n c t i o n ( r o u t e _ a r r a y ) { v a r   a p p = t h i s ; $ . e a c h ( r o u t e _ a r r a y , f u n c t i o n ( i , r o u t e _ a r g s ) { a p p . r o u t e . a p p l y ( a p p , r o u t e _ a r g s ) } ) ; r e t u r n   t h i s } , e v e n t N a m e s p a c e : f u n c t i o n ( ) { r e t u r n [ " s a m m y - a p p " , t h i s . n a m e s p a c e ] . j o i n ( " - " ) } , b i n d : f u n c t i o n ( n a m e , d a t a , c a l l b a c k ) { v a r   a p p = t h i s ; i f ( t y p e o f   c a l l b a c k = = " u n d e f i n e d " ) { c a l l b a c k = d a t a } v a r   l i s t e n e r _ c a l l b a c k = f u n c t i o n ( ) { v a r   e , c o n t e x t , d a t a ; e = a r g u m e n t s [ 0 ] ; d a t a = a r g u m e n t s [ 1 ] ; i f ( d a t a & & d a t a . c o n t e x t ) { c o n t e x t = d a t a . c o n t e x t ; d e l e t e   d a t a . c o n t e x t } e l s e { c o n t e x t = n e w   a p p . c o n t e x t _ p r o t o t y p e ( a p p , " b i n d " , e . t y p e , d a t a , e . t a r g e t ) } e . c l e a n e d _ t y p e = e . t y p e . r e p l a c e ( a p p . e v e n t N a m e s p a c e ( ) , " " ) ; c a l l b a c k . a p p l y ( c o n t e x t , [ e , d a t a ] ) } ; i f ( ! t h i s . l i s t e n e r s [ n a m e ] ) { t h i s . l i s t e n e r s [ n a m e ] = [ ] } t h i s . l i s t e n e r s [ n a m e ] . p u s h ( l i s t e n e r _ c a l l b a c k ) ; i f ( t h i s . i s R u n n i n g ( ) ) { t h i s . _ l i s t e n ( n a m e , l i s t e n e r _ c a l l b a c k ) } r e t u r n   t h i s } , t r i g g e r : f u n c t i o n ( n a m e , d a t a ) { t h i s . $ e l e m e n t ( ) . t r i g g e r ( [ n a m e , t h i s . e v e n t N a m e s p a c e ( ) ] . j o i n ( " . " ) , [ d a t a ] ) ; r e t u r n   t h i s } , r e f r e s h : f u n c t i o n ( ) { t h i s . l a s t _ l o c a t i o n = n u l l ; t h i s . t r i g g e r ( " l o c a t i o n - c h a n g e d " ) ; r e t u r n   t h i s } , b e f o r e : f u n c t i o n ( o p t i o n s , c a l l b a c k ) { i f ( _ i s F u n c t i o n ( o p t i o n s ) ) { c a l l b a c k = o p t i o n s ; o p t i o n s = { } } t h i s . b e f o r e s . p u s h ( [ o p t i o n s , c a l l b a c k ] ) ; r e t u r n   t h i s } , a f t e r : f u n c t i o n ( c a l l b a c k ) { r e t u r n   t h i s . b i n d ( " e v e n t - c o n t e x t - a f t e r " , c a l l b a c k ) } , a r o u n d : f u n c t i o n ( c a l l b a c k ) { t h i s . a r o u n d s . p u s h ( c a l l b a c k ) ; r e t u r n   t h i s } , o n C o m p l e t e : f u n c t i o n ( c a l l b a c k ) { t h i s . _ o n C o m p l e t e = c a l l b a c k ; r e t u r n   t h i s } , i s R u n n i n g : f u n c t i o n ( ) { r e t u r n   t h i s . _ r u n n i n g } , h e l p e r s : f u n c t i o n ( e x t e n s i o n s ) { $ . e x t e n d ( t h i s . c o n t e x t _ p r o t o t y p e . p r o t o t y p e , e x t e n s i o n s ) ; r e t u r n   t h i s } , h e l p e r : f u n c t i o n ( n a m e , m e t h o d ) { t h i s . c o n t e x t _ p r o t o t y p e . p r o t o t y p e [ n a m e ] = m e t h o d ; r e t u r n   t h i s } , r u n : f u n c t i o n ( s t a r t _ u r l ) { i f ( t h i s . i s R u n n i n g ( ) ) { r e t u r n   f a l s e } v a r   a p p = t h i s ; $ . e a c h ( t h i s . l i s t e n e r s . t o H a s h ( ) , f u n c t i o n ( n a m e , c a l l b a c k s ) { $ . e a c h ( c a l l b a c k s , f u n c t i o n ( i , l i s t e n e r _ c a l l b a c k ) { a p p . _ l i s t e n ( n a m e , l i s t e n e r _ c a l l b a c k ) } ) } ) ; t h i s . t r i g g e r ( " r u n " , { s t a r t _ u r l : s t a r t _ u r l } ) ; t h i s . _ r u n n i n g = t r u e ; t h i s . l a s t _ l o c a t i o n = n u l l ; i f ( ! / \ # ( . + ) / . t e s t ( t h i s . g e t L o c a t i o n ( ) ) & & t y p e o f   s t a r t _ u r l ! = " u n d e f i n e d " ) { t h i s . s e t L o c a t i o n ( s t a r t _ u r l ) } t h i s . _ c h e c k L o c a t i o n ( ) ; t h i s . _ l o c a t i o n _ p r o x y . b i n d ( ) ; t h i s . b i n d ( " l o c a t i o n - c h a n g e d " , f u n c t i o n ( ) { a p p . _ c h e c k L o c a t i o n ( ) } ) ; t h i s . b i n d ( " s u b m i t " , f u n c t i o n ( e ) { i f ( ! S a m m y . t a r g e t I s T h i s W i n d o w ( e , " f o r m " ) ) { r e t u r n   t r u e } v a r   r e t u r n e d = a p p . _ c h e c k F o r m S u b m i s s i o n ( $ ( e . t a r g e t ) . c l o s e s t ( " f o r m " ) ) ; r e t u r n   r e t u r n e d = = = f a l s e ? e . p r e v e n t D e f a u l t ( ) : f a l s e } ) ; $ ( w i n d o w ) . b i n d ( " u n l o a d " , f u n c t i o n ( ) { a p p . u n l o a d ( ) } ) ; r e t u r n   t h i s . t r i g g e r ( " c h a n g e d " ) } , u n l o a d : f u n c t i o n ( ) { i f ( ! t h i s . i s R u n n i n g ( ) ) { r e t u r n   f a l s e } v a r   a p p = t h i s ; t h i s . t r i g g e r ( " u n l o a d " ) ; t h i s . _ l o c a t i o n _ p r o x y . u n b i n d ( ) ; t h i s . $ e l e m e n t ( ) . u n b i n d ( " s u b m i t " ) . r e m o v e C l a s s ( a p p . e v e n t N a m e s p a c e ( ) ) ; $ . e a c h ( t h i s . l i s t e n e r s . t o H a s h ( ) , f u n c t i o n ( n a m e , l i s t e n e r s ) { $ . e a c h ( l i s t e n e r s , f u n c t i o n ( i , l i s t e n e r _ c a l l b a c k ) { a p p . _ u n l i s t e n ( n a m e , l i s t e n e r _ c a l l b a c k ) } ) } ) ; t h i s . _ r u n n i n g = f a l s e ; r e t u r n   t h i s } , d e s t r o y : f u n c t i o n ( ) { t h i s . u n l o a d ( ) ; d e l e t e   S a m m y . a p p s [ t h i s . e l e m e n t _ s e l e c t o r ] ; r e t u r n   t h i s } , b i n d T o A l l E v e n t s : f u n c t i o n ( c a l l b a c k ) { v a r   a p p = t h i s ; $ . e a c h ( t h i s . A P P _ E V E N T S , f u n c t i o n ( i , e ) { a p p . b i n d ( e , c a l l b a c k ) } ) ; $ . e a c h ( t h i s . l i s t e n e r s . k e y s ( t r u e ) , f u n c t i o n ( i , n a m e ) { i f ( $ . i n A r r a y ( n a m e , a p p . A P P _ E V E N T S ) = = - 1 ) { a p p . b i n d ( n a m e , c a l l b a c k ) } } ) ; r e t u r n   t h i s } , r o u t a b l e P a t h : f u n c t i o n ( p a t h ) { r e t u r n   p a t h . r e p l a c e ( Q U E R Y _ S T R I N G _ M A T C H E R , " " ) } , l o o k u p R o u t e : f u n c t i o n ( v e r b , p a t h ) { v a r   a p p = t h i s , r o u t e d = f a l s e , i = 0 , l , r o u t e ; i f ( t y p e o f   t h i s . r o u t e s [ v e r b ] ! = " u n d e f i n e d " ) { l = t h i s . r o u t e s [ v e r b ] . l e n g t h ; f o r ( ; i < l ; i + + ) { r o u t e = t h i s . r o u t e s [ v e r b ] [ i ] ; i f ( a p p . r o u t a b l e P a t h ( p a t h ) . m a t c h ( r o u t e . p a t h ) ) { r o u t e d = r o u t e ; b r e a k } } } r e t u r n   r o u t e d } , r u n R o u t e : f u n c t i o n ( v e r b , p a t h , p a r a m s , t a r g e t ) { v a r   a p p = t h i s , r o u t e = t h i s . l o o k u p R o u t e ( v e r b , p a t h ) , c o n t e x t , w r a p p e d _ r o u t e , a r o u n d s , a r o u n d , b e f o r e s , b e f o r e , c a l l b a c k _ a r g s , p a t h _ p a r a m s , f i n a l _ r e t u r n e d ; i f ( t h i s . d e b u g ) { t h i s . l o g ( " r u n R o u t e " , [ v e r b , p a t h ] . j o i n ( "   " ) ) } t h i s . t r i g g e r ( " r u n - r o u t e " , { v e r b : v e r b , p a t h : p a t h , p a r a m s : p a r a m s } ) ; i f ( t y p e o f   p a r a m s = = " u n d e f i n e d " ) { p a r a m s = { } } $ . e x t e n d ( p a r a m s , t h i s . _ p a r s e Q u e r y S t r i n g ( p a t h ) ) ; i f ( r o u t e ) { t h i s . t r i g g e r ( " r o u t e - f o u n d " , { r o u t e : r o u t e } ) ; i f ( ( p a t h _ p a r a m s = r o u t e . p a t h . e x e c ( t h i s . r o u t a b l e P a t h ( p a t h ) ) ) ! = = n u l l ) { p a t h _ p a r a m s . s h i f t ( ) ; $ . e a c h ( p a t h _ p a r a m s , f u n c t i o n ( i , p a r a m ) { i f ( r o u t e . p a r a m _ n a m e s [ i ] ) { p a r a m s [ r o u t e . p a r a m _ n a m e s [ i ] ] = _ d e c o d e ( p a r a m ) } e l s e { i f ( ! p a r a m s . s p l a t ) { p a r a m s . s p l a t = [ ] } p a r a m s . s p l a t . p u s h ( _ d e c o d e ( p a r a m ) ) } } ) } c o n t e x t = n e w   t h i s . c o n t e x t _ p r o t o t y p e ( t h i s , v e r b , p a t h , p a r a m s , t a r g e t ) ; a r o u n d s = t h i s . a r o u n d s . s l i c e ( 0 ) ; b e f o r e s = t h i s . b e f o r e s . s l i c e ( 0 ) ; c a l l b a c k _ a r g s = [ c o n t e x t ] ; i f ( p a r a m s . s p l a t ) { c a l l b a c k _ a r g s = c a l l b a c k _ a r g s . c o n c a t ( p a r a m s . s p l a t ) } w r a p p e d _ r o u t e = f u n c t i o n ( ) { v a r   r e t u r n e d , i , n e x t R o u t e ; w h i l e ( b e f o r e s . l e n g t h > 0 ) { b e f o r e = b e f o r e s . s h i f t ( ) ; i f ( a p p . c o n t e x t M a t c h e s O p t i o n s ( c o n t e x t , b e f o r e [ 0 ] ) ) { r e t u r n e d = b e f o r e [ 1 ] . a p p l y ( c o n t e x t , [ c o n t e x t ] ) ; i f ( r e t u r n e d = = = f a l s e ) { r e t u r n   f a l s e } } } a p p . l a s t _ r o u t e = r o u t e ; c o n t e x t . t r i g g e r ( " e v e n t - c o n t e x t - b e f o r e " , { c o n t e x t : c o n t e x t } ) ; i f ( t y p e o f   r o u t e . c a l l b a c k = = = " f u n c t i o n " ) { r o u t e . c a l l b a c k = [ r o u t e . c a l l b a c k ] } i f ( r o u t e . c a l l b a c k & & r o u t e . c a l l b a c k . l e n g t h ) { i = - 1 ; n e x t R o u t e = f u n c t i o n ( ) { i + + ; i f ( r o u t e . c a l l b a c k [ i ] ) { r e t u r n e d = r o u t e . c a l l b a c k [ i ] . a p p l y ( c o n t e x t , c a l l b a c k _ a r g s ) } e l s e   i f ( a p p . _ o n C o m p l e t e & & t y p e o f ( a p p . _ o n C o m p l e t e = = = " f u n c t i o n " ) ) { a p p . _ o n C o m p l e t e ( c o n t e x t ) } } ; c a l l b a c k _ a r g s . p u s h ( n e x t R o u t e ) ; n e x t R o u t e ( ) } c o n t e x t . t r i g g e r ( " e v e n t - c o n t e x t - a f t e r " , { c o n t e x t : c o n t e x t } ) ; r e t u r n   r e t u r n e d } ; $ . e a c h ( a r o u n d s . r e v e r s e ( ) , f u n c t i o n ( i , a r o u n d ) { v a r   l a s t _ w r a p p e d _ r o u t e = w r a p p e d _ r o u t e ; w r a p p e d _ r o u t e = f u n c t i o n ( ) { r e t u r n   a r o u n d . a p p l y ( c o n t e x t , [ l a s t _ w r a p p e d _ r o u t e ] ) } } ) ; t r y { f i n a l _ r e t u r n e d = w r a p p e d _ r o u t e ( ) } c a t c h ( e ) { t h i s . e r r o r ( [ " 5 0 0   E r r o r " , v e r b , p a t h ] . j o i n ( "   " ) , e ) } r e t u r n   f i n a l _ r e t u r n e d } e l s e { r e t u r n   t h i s . n o t F o u n d ( v e r b , p a t h ) } } , c o n t e x t M a t c h e s O p t i o n s : f u n c t i o n ( c o n t e x t , m a t c h _ o p t i o n s , p o s i t i v e ) { v a r   o p t i o n s = m a t c h _ o p t i o n s ; i f ( t y p e o f   o p t i o n s = = = " s t r i n g " | | _ i s R e g E x p ( o p t i o n s ) ) { o p t i o n s = { p a t h : o p t i o n s } } i f ( t y p e o f   p o s i t i v e = = = " u n d e f i n e d " ) { p o s i t i v e = t r u e } i f ( $ . i s E m p t y O b j e c t ( o p t i o n s ) ) { r e t u r n   t r u e } i f ( _ i s A r r a y ( o p t i o n s . p a t h ) ) { v a r   r e s u l t s , n u m o p t , o p t s , l e n ; r e s u l t s = [ ] ; f o r ( n u m o p t = 0 , l e n = o p t i o n s . p a t h . l e n g t h ; n u m o p t < l e n ; n u m o p t + = 1 ) { o p t s = $ . e x t e n d ( { } , o p t i o n s , { p a t h : o p t i o n s . p a t h [ n u m o p t ] } ) ; r e s u l t s . p u s h ( t h i s . c o n t e x t M a t c h e s O p t i o n s ( c o n t e x t , o p t s ) ) } v a r   m a t c h e d = $ . i n A r r a y ( t r u e , r e s u l t s ) > - 1 ? t r u e : f a l s e ; r e t u r n   p o s i t i v e ? m a t c h e d : ! m a t c h e d } i f ( o p t i o n s . o n l y ) { r e t u r n   t h i s . c o n t e x t M a t c h e s O p t i o n s ( c o n t e x t , o p t i o n s . o n l y , t r u e ) } e l s e   i f ( o p t i o n s . e x c e p t ) { r e t u r n   t h i s . c o n t e x t M a t c h e s O p t i o n s ( c o n t e x t , o p t i o n s . e x c e p t , f a l s e ) } v a r   p a t h _ m a t c h e d = t r u e , v e r b _ m a t c h e d = t r u e ; i f ( o p t i o n s . p a t h ) { i f ( ! _ i s R e g E x p ( o p t i o n s . p a t h ) ) { o p t i o n s . p a t h = n e w   R e g E x p ( o p t i o n s . p a t h . t o S t r i n g ( ) + " $ " ) } p a t h _ m a t c h e d = o p t i o n s . p a t h . t e s t ( c o n t e x t . p a t h ) } i f ( o p t i o n s . v e r b ) { i f ( t y p e o f   o p t i o n s . v e r b = = = " s t r i n g " ) { v e r b _ m a t c h e d = o p t i o n s . v e r b = = = c o n t e x t . v e r b } e l s e { v e r b _ m a t c h e d = o p t i o n s . v e r b . i n d e x O f ( c o n t e x t . v e r b ) > - 1 } } r e t u r n   p o s i t i v e ? v e r b _ m a t c h e d & & p a t h _ m a t c h e d : ! ( v e r b _ m a t c h e d & & p a t h _ m a t c h e d ) } , g e t L o c a t i o n : f u n c t i o n ( ) { r e t u r n   t h i s . _ l o c a t i o n _ p r o x y . g e t L o c a t i o n ( ) } , s e t L o c a t i o n : f u n c t i o n ( n e w _ l o c a t i o n ) { r e t u r n   t h i s . _ l o c a t i o n _ p r o x y . s e t L o c a t i o n ( n e w _ l o c a t i o n ) } , s w a p : f u n c t i o n ( c o n t e n t , c a l l b a c k ) { v a r   $ e l = t h i s . $ e l e m e n t ( ) . h t m l ( c o n t e n t ) ; i f ( _ i s F u n c t i o n ( c a l l b a c k ) ) { c a l l b a c k ( c o n t e n t ) } r e t u r n   $ e l } , t e m p l a t e C a c h e : f u n c t i o n ( k e y , v a l u e ) { i f ( t y p e o f   v a l u e ! = " u n d e f i n e d " ) { r e t u r n   _ t e m p l a t e _ c a c h e [ k e y ] = v a l u e } e l s e { r e t u r n   _ t e m p l a t e _ c a c h e [ k e y ] } } , c l e a r T e m p l a t e C a c h e : f u n c t i o n ( ) { r e t u r n   _ t e m p l a t e _ c a c h e = { } } , n o t F o u n d : f u n c t i o n ( v e r b , p a t h ) { v a r   r e t = t h i s . e r r o r ( [ " 4 0 4   N o t   F o u n d " , v e r b , p a t h ] . j o i n ( "   " ) ) ; r e t u r n   v e r b = = = " g e t " ? r e t : t r u e } , e r r o r : f u n c t i o n ( m e s s a g e , o r i g i n a l _ e r r o r ) { i f ( ! o r i g i n a l _ e r r o r ) { o r i g i n a l _ e r r o r = n e w   E r r o r } o r i g i n a l _ e r r o r . m e s s a g e = [ m e s s a g e , o r i g i n a l _ e r r o r . m e s s a g e ] . j o i n ( "   " ) ; t h i s . t r i g g e r ( " e r r o r " , { m e s s a g e : o r i g i n a l _ e r r o r . m e s s a g e , e r r o r : o r i g i n a l _ e r r o r } ) ; i f ( t h i s . r a i s e _ e r r o r s ) { t h r o w   o r i g i n a l _ e r r o r } e l s e { t h i s . l o g ( o r i g i n a l _ e r r o r . m e s s a g e , o r i g i n a l _ e r r o r ) } } , _ c h e c k L o c a t i o n : f u n c t i o n ( ) { v a r   l o c a t i o n , r e t u r n e d ; l o c a t i o n = t h i s . g e t L o c a t i o n ( ) ; i f ( ! t h i s . l a s t _ l o c a t i o n | | t h i s . l a s t _ l o c a t i o n [ 0 ] ! = " g e t " | | t h i s . l a s t _ l o c a t i o n [ 1 ] ! = l o c a t i o n ) { t h i s . l a s t _ l o c a t i o n = [ " g e t " , l o c a t i o n ] ; r e t u r n e d = t h i s . r u n R o u t e ( " g e t " , l o c a t i o n ) } r e t u r n   r e t u r n e d } , _ g e t F o r m V e r b : f u n c t i o n ( f o r m ) { v a r   $ f o r m = $ ( f o r m ) , v e r b , $ _ m e t h o d ; $ _ m e t h o d = $ f o r m . f i n d ( ' i n p u t [ n a m e = " _ m e t h o d " ] ' ) ; i f ( $ _ m e t h o d . l e n g t h > 0 ) { v e r b = $ _ m e t h o d . v a l ( ) } i f ( ! v e r b ) { v e r b = $ f o r m [ 0 ] . g e t A t t r i b u t e ( " m e t h o d " ) } i f ( ! v e r b | | v e r b = = = " " ) { v e r b = " g e t " } r e t u r n   $ . t r i m ( v e r b . t o S t r i n g ( ) . t o L o w e r C a s e ( ) ) } , _ c h e c k F o r m S u b m i s s i o n : f u n c t i o n ( f o r m ) { v a r   $ f o r m , p a t h , v e r b , p a r a m s , r e t u r n e d ; t h i s . t r i g g e r ( " c h e c k - f o r m - s u b m i s s i o n " , { f o r m : f o r m } ) ; $ f o r m = $ ( f o r m ) ; p a t h = $ f o r m . a t t r ( " a c t i o n " ) | | " " ; v e r b = t h i s . _ g e t F o r m V e r b ( $ f o r m ) ; i f ( t h i s . d e b u g ) { t h i s . l o g ( " _ c h e c k F o r m S u b m i s s i o n " , $ f o r m , p a t h , v e r b ) } i f ( v e r b = = = " g e t " ) { p a r a m s = t h i s . _ s e r i a l i z e F o r m P a r a m s ( $ f o r m ) ; i f ( p a r a m s ! = = " " ) { p a t h + = " ? " + p a r a m s } t h i s . s e t L o c a t i o n ( p a t h ) ; r e t u r n e d = f a l s e } e l s e { p a r a m s = $ . e x t e n d ( { } , t h i s . _ p a r s e F o r m P a r a m s ( $ f o r m ) ) ; r e t u r n e d = t h i s . r u n R o u t e ( v e r b , p a t h , p a r a m s , f o r m . g e t ( 0 ) ) } r e t u r n   t y p e o f   r e t u r n e d = = " u n d e f i n e d " ? f a l s e : r e t u r n e d } , _ s e r i a l i z e F o r m P a r a m s : f u n c t i o n ( $ f o r m ) { v a r   q u e r y S t r i n g = " " , f i e l d s = $ f o r m . s e r i a l i z e A r r a y ( ) , i ; i f ( f i e l d s . l e n g t h > 0 ) { q u e r y S t r i n g = t h i s . _ e n c o d e F o r m P a i r ( f i e l d s [ 0 ] . n a m e , f i e l d s [ 0 ] . v a l u e ) ; f o r ( i = 1 ; i < f i e l d s . l e n g t h ; i + + ) { q u e r y S t r i n g = q u e r y S t r i n g + " & " + t h i s . _ e n c o d e F o r m P a i r ( f i e l d s [ i ] . n a m e , f i e l d s [ i ] . v a l u e ) } } r e t u r n   q u e r y S t r i n g } , _ e n c o d e F o r m P a i r : f u n c t i o n ( n a m e , v a l u e ) { r e t u r n   _ e n c o d e ( n a m e ) + " = " + _ e n c o d e ( v a l u e ) } , _ p a r s e F o r m P a r a m s : f u n c t i o n ( $ f o r m ) { v a r   p a r a m s = { } , f o r m _ f i e l d s = $ f o r m . s e r i a l i z e A r r a y ( ) , i ; f o r ( i = 0 ; i < f o r m _ f i e l d s . l e n g t h ; i + + ) { p a r a m s = t h i s . _ p a r s e P a r a m P a i r ( p a r a m s , f o r m _ f i e l d s [ i ] . n a m e , f o r m _ f i e l d s [ i ] . v a l u e ) } r e t u r n   p a r a m s } , _ p a r s e Q u e r y S t r i n g : f u n c t i o n ( p a t h ) { v a r   p a r a m s = { } , p a r t s , p a i r s , p a i r , i ; p a r t s = p a t h . m a t c h ( Q U E R Y _ S T R I N G _ M A T C H E R ) ; i f ( p a r t s & & p a r t s [ 1 ] ) { p a i r s = p a r t s [ 1 ] . s p l i t ( " & " ) ; f o r ( i = 0 ; i < p a i r s . l e n g t h ; i + + ) { p a i r = p a i r s [ i ] . s p l i t ( " = " ) ; p a r a m s = t h i s . _ p a r s e P a r a m P a i r ( p a r a m s , _ d e c o d e ( p a i r [ 0 ] ) , _ d e c o d e ( p a i r [ 1 ] | | " " ) ) } } r e t u r n   p a r a m s } , _ p a r s e P a r a m P a i r : f u n c t i o n ( p a r a m s , k e y , v a l u e ) { i f ( t y p e o f   p a r a m s [ k e y ] ! = = " u n d e f i n e d " ) { i f ( _ i s A r r a y ( p a r a m s [ k e y ] ) ) { p a r a m s [ k e y ] . p u s h ( v a l u e ) } e l s e { p a r a m s [ k e y ] = [ p a r a m s [ k e y ] , v a l u e ] } } e l s e { p a r a m s [ k e y ] = v a l u e } r e t u r n   p a r a m s } , _ l i s t e n : f u n c t i o n ( n a m e , c a l l b a c k ) { r e t u r n   t h i s . $ e l e m e n t ( ) . b i n d ( [ n a m e , t h i s . e v e n t N a m e s p a c e ( ) ] . j o i n ( " . " ) , c a l l b a c k ) } , _ u n l i s t e n : f u n c t i o n ( n a m e , c a l l b a c k ) { r e t u r n   t h i s . $ e l e m e n t ( ) . u n b i n d ( [ n a m e , t h i s . e v e n t N a m e s p a c e ( ) ] . j o i n ( " . " ) , c a l l b a c k ) } } ) ; S a m m y . R e n d e r C o n t e x t = f u n c t i o n ( e v e n t _ c o n t e x t ) { t h i s . e v e n t _ c o n t e x t = e v e n t _ c o n t e x t ; t h i s . c a l l b a c k s = [ ] ; t h i s . p r e v i o u s _ c o n t e n t = n u l l ; t h i s . c o n t e n t = n u l l ; t h i s . n e x t _ e n g i n e = f a l s e ; t h i s . w a i t i n g = f a l s e } ; S a m m y . R e n d e r C o n t e x t . p r o t o t y p e = $ . e x t e n d ( { } , S a m m y . O b j e c t . p r o t o t y p e , { t h e n : f u n c t i o n ( c a l l b a c k ) { i f ( ! _ i s F u n c t i o n ( c a l l b a c k ) ) { i f ( t y p e o f   c a l l b a c k = = = " s t r i n g " & & c a l l b a c k   i n   t h i s . e v e n t _ c o n t e x t ) { v a r   h e l p e r = t h i s . e v e n t _ c o n t e x t [ c a l l b a c k ] ; c a l l b a c k = f u n c t i o n ( c o n t e n t ) { r e t u r n   h e l p e r . a p p l y ( t h i s . e v e n t _ c o n t e x t , [ c o n t e n t ] ) } } e l s e { r e t u r n   t h i s } } v a r   c o n t e x t = t h i s ; i f ( t h i s . w a i t i n g ) { t h i s . c a l l b a c k s . p u s h ( c a l l b a c k ) } e l s e { t h i s . w a i t ( ) ; w i n d o w . s e t T i m e o u t ( f u n c t i o n ( ) { v a r   r e t u r n e d = c a l l b a c k . a p p l y ( c o n t e x t , [ c o n t e x t . c o n t e n t , c o n t e x t . p r e v i o u s _ c o n t e n t ] ) ; i f ( r e t u r n e d ! = = f a l s e ) { c o n t e x t . n e x t ( r e t u r n e d ) } } , 0 ) } r e t u r n   t h i s } , w a i t : f u n c t i o n ( ) { t h i s . w a i t i n g = t r u e } , n e x t : f u n c t i o n ( c o n t e n t ) { t h i s . w a i t i n g = f a l s e ; i f ( t y p e o f   c o n t e n t ! = = " u n d e f i n e d " ) { t h i s . p r e v i o u s _ c o n t e n t = t h i s . c o n t e n t ; t h i s . c o n t e n t = c o n t e n t } i f ( t h i s . c a l l b a c k s . l e n g t h > 0 ) { t h i s . t h e n ( t h i s . c a l l b a c k s . s h i f t ( ) ) } } , l o a d : f u n c t i o n ( l o c a t i o n , o p t i o n s , c a l l b a c k ) { v a r   c o n t e x t = t h i s ; r e t u r n   t h i s . t h e n ( f u n c t i o n ( ) { v a r   s h o u l d _ c a c h e , c a c h e d , i s _ j s o n , l o c a t i o n _ a r r a y ; i f ( _ i s F u n c t i o n ( o p t i o n s ) ) { c a l l b a c k = o p t i o n s ; o p t i o n s = { } } e l s e { o p t i o n s = $ . e x t e n d ( { } , o p t i o n s ) } i f ( c a l l b a c k ) { t h i s . t h e n ( c a l l b a c k ) } i f ( t y p e o f   l o c a t i o n = = = " s t r i n g " ) { i s _ j s o n = l o c a t i o n . m a t c h ( / \ . j s o n ( \ ? | $ ) / ) | | o p t i o n s . j s o n ; s h o u l d _ c a c h e = i s _ j s o n ? o p t i o n s . c a c h e = = = t r u e : o p t i o n s . c a c h e ! = = f a l s e ; c o n t e x t . n e x t _ e n g i n e = c o n t e x t . e v e n t _ c o n t e x t . e n g i n e F o r ( l o c a t i o n ) ; d e l e t e   o p t i o n s . c a c h e ; d e l e t e   o p t i o n s . j s o n ; i f ( o p t i o n s . e n g i n e ) { c o n t e x t . n e x t _ e n g i n e = o p t i o n s . e n g i n e ; d e l e t e   o p t i o n s . e n g i n e } i f ( s h o u l d _ c a c h e & & ( c a c h e d = t h i s . e v e n t _ c o n t e x t . a p p . t e m p l a t e C a c h e ( l o c a t i o n ) ) ) { r e t u r n   c a c h e d } t h i s . w a i t ( ) ; $ . a j a x ( $ . e x t e n d ( { u r l : l o c a t i o n , d a t a : { } , d a t a T y p e : i s _ j s o n ? " j s o n " : " t e x t " , t y p e : " g e t " , s u c c e s s : f u n c t i o n ( d a t a ) { i f ( s h o u l d _ c a c h e ) { c o n t e x t . e v e n t _ c o n t e x t . a p p . t e m p l a t e C a c h e ( l o c a t i o n , d a t a ) } c o n t e x t . n e x t ( d a t a ) } } , o p t i o n s ) ) ; r e t u r n   f a l s e } e l s e { i f ( l o c a t i o n . n o d e T y p e ) { r e t u r n   l o c a t i o n . i n n e r H T M L } i f ( l o c a t i o n . s e l e c t o r ) { c o n t e x t . n e x t _ e n g i n e = l o c a t i o n . a t t r ( " d a t a - e n g i n e " ) ; i f ( o p t i o n s . c l o n e = = = f a l s e ) { r e t u r n   l o c a t i o n . r e m o v e ( ) [ 0 ] . i n n e r H T M L . t o S t r i n g ( ) } e l s e { r e t u r n   l o c a t i o n [ 0 ] . i n n e r H T M L . t o S t r i n g ( ) } } } } ) } , l o a d P a r t i a l s : f u n c t i o n ( p a r t i a l s ) { v a r   n a m e ; i f ( p a r t i a l s ) { t h i s . p a r t i a l s = t h i s . p a r t i a l s | | { } ; f o r ( n a m e   i n   p a r t i a l s ) { ( f u n c t i o n ( c o n t e x t , n a m e ) { c o n t e x t . l o a d ( p a r t i a l s [ n a m e ] ) . t h e n ( f u n c t i o n ( t e m p l a t e ) { t h i s . p a r t i a l s [ n a m e ] = t e m p l a t e } ) } ) ( t h i s , n a m e ) } } r e t u r n   t h i s } , r e n d e r : f u n c t i o n ( l o c a t i o n , d a t a , c a l l b a c k , p a r t i a l s ) { i f ( _ i s F u n c t i o n ( l o c a t i o n ) & & ! d a t a ) { r e t u r n   t h i s . t h e n ( l o c a t i o n ) } e l s e { i f ( _ i s F u n c t i o n ( d a t a ) ) { p a r t i a l s = c a l l b a c k ; c a l l b a c k = d a t a ; d a t a = n u l l } e l s e   i f ( c a l l b a c k & & ! _ i s F u n c t i o n ( c a l l b a c k ) ) { p a r t i a l s = c a l l b a c k ; c a l l b a c k = n u l l } r e t u r n   t h i s . l o a d P a r t i a l s ( p a r t i a l s ) . l o a d ( l o c a t i o n ) . i n t e r p o l a t e ( d a t a , l o c a t i o n ) . t h e n ( c a l l b a c k ) } } , p a r t i a l : f u n c t i o n ( l o c a t i o n , d a t a , c a l l b a c k , p a r t i a l s ) { i f ( _ i s F u n c t i o n ( c a l l b a c k ) ) { r e t u r n   t h i s . r e n d e r ( l o c a t i o n , d a t a , p a r t i a l s ) . s w a p ( c a l l b a c k ) } e l s e   i f ( _ i s F u n c t i o n ( d a t a ) ) { r e t u r n   t h i s . r e n d e r ( l o c a t i o n , { } , c a l l b a c k ) . s w a p ( d a t a ) } e l s e { r e t u r n   t h i s . r e n d e r ( l o c a t i o n , d a t a , c a l l b a c k ) . s w a p ( ) } } , s e n d : f u n c t i o n ( ) { v a r   c o n t e x t = t h i s , a r g s = _ m a k e A r r a y ( a r g u m e n t s ) , f u n = a r g s . s h i f t ( ) ; i f ( _ i s A r r a y ( a r g s [ 0 ] ) ) { a r g s = a r g s [ 0 ] } r e t u r n   t h i s . t h e n ( f u n c t i o n ( c o n t e n t ) { a r g s . p u s h ( f u n c t i o n ( r e s p o n s e ) { c o n t e x t . n e x t ( r e s p o n s e ) } ) ; c o n t e x t . w a i t ( ) ; f u n . a p p l y ( f u n , a r g s ) ; r e t u r n   f a l s e } ) } , c o l l e c t : f u n c t i o n ( a r r a y , c a l l b a c k , n o w ) { v a r   c o n t e x t = t h i s ; v a r   c o l l = f u n c t i o n ( ) { i f ( _ i s F u n c t i o n ( a r r a y ) ) { c a l l b a c k = a r r a y ; a r r a y = t h i s . c o n t e n t } v a r   c o n t e n t s = [ ] , d o m s = f a l s e ; $ . e a c h ( a r r a y , f u n c t i o n ( i , i t e m ) { v a r   r e t u r n e d = c a l l b a c k . a p p l y ( c o n t e x t , [ i , i t e m ] ) ; i f ( r e t u r n e d . j q u e r y & & r e t u r n e d . l e n g t h = = 1 ) { r e t u r n e d = r e t u r n e d [ 0 ] ; d o m s = t r u e } c o n t e n t s . p u s h ( r e t u r n e d ) ; r e t u r n   r e t u r n e d } ) ; r e t u r n   d o m s ? c o n t e n t s : c o n t e n t s . j o i n ( " " ) } ; r e t u r n   n o w ? c o l l ( ) : t h i s . t h e n ( c o l l ) } , r e n d e r E a c h : f u n c t i o n ( l o c a t i o n , n a m e , d a t a , c a l l b a c k ) { i f ( _ i s A r r a y ( n a m e ) ) { c a l l b a c k = d a t a ; d a t a = n a m e ; n a m e = n u l l } r e t u r n   t h i s . l o a d ( l o c a t i o n ) . t h e n ( f u n c t i o n ( c o n t e n t ) { v a r   r c t x = t h i s ; i f ( ! d a t a ) { d a t a = _ i s A r r a y ( t h i s . p r e v i o u s _ c o n t e n t ) ? t h i s . p r e v i o u s _ c o n t e n t : [ ] } i f ( c a l l b a c k ) { $ . e a c h ( d a t a , f u n c t i o n ( i , v a l u e ) { v a r   i d a t a = { } , e n g i n e = t h i s . n e x t _ e n g i n e | | l o c a t i o n ; i f ( n a m e ) { i d a t a [ n a m e ] = v a l u e } e l s e { i d a t a = v a l u e } c a l l b a c k ( v a l u e , r c t x . e v e n t _ c o n t e x t . i n t e r p o l a t e ( c o n t e n t , i d a t a , e n g i n e ) ) } ) } e l s e { r e t u r n   t h i s . c o l l e c t ( d a t a , f u n c t i o n ( i , v a l u e ) { v a r   i d a t a = { } , e n g i n e = t h i s . n e x t _ e n g i n e | | l o c a t i o n ; i f ( n a m e ) { i d a t a [ n a m e ] = v a l u e } e l s e { i d a t a = v a l u e } r e t u r n   t h i s . e v e n t _ c o n t e x t . i n t e r p o l a t e ( c o n t e n t , i d a t a , e n g i n e ) } , t r u e ) } } ) } , i n t e r p o l a t e : f u n c t i o n ( d a t a , e n g i n e , r e t a i n ) { v a r   c o n t e x t = t h i s ; r e t u r n   t h i s . t h e n ( f u n c t i o n ( c o n t e n t , p r e v ) { i f ( ! d a t a & & p r e v ) { d a t a = p r e v } i f ( t h i s . n e x t _ e n g i n e ) { e n g i n e = t h i s . n e x t _ e n g i n e ; t h i s . n e x t _ e n g i n e = f a l s e } v a r   r e n d e r e d = c o n t e x t . e v e n t _ c o n t e x t . i n t e r p o l a t e ( c o n t e n t , d a t a , e n g i n e , t h i s . p a r t i a l s ) ; r e t u r n   r e t a i n ? p r e v + r e n d e r e d : r e n d e r e d } ) } , s w a p : f u n c t i o n ( c a l l b a c k ) { r e t u r n   t h i s . t h e n ( f u n c t i o n ( c o n t e n t ) { t h i s . e v e n t _ c o n t e x t . s w a p ( c o n t e n t , c a l l b a c k ) ; r e t u r n   c o n t e n t } ) . t r i g g e r ( " c h a n g e d " , { } ) } , a p p e n d T o : f u n c t i o n ( s e l e c t o r ) { r e t u r n   t h i s . t h e n ( f u n c t i o n ( c o n t e n t ) { $ ( s e l e c t o r ) . a p p e n d ( c o n t e n t ) } ) . t r i g g e r ( " c h a n g e d " , { } ) } , p r e p e n d T o : f u n c t i o n ( s e l e c t o r ) { r e t u r n   t h i s . t h e n ( f u n c t i o n ( c o n t e n t ) { $ ( s e l e c t o r ) . p r e p e n d ( c o n t e n t ) } ) . t r i g g e r ( " c h a n g e d " , { } ) } , r e p l a c e : f u n c t i o n ( s e l e c t o r ) { r e t u r n   t h i s . t h e n ( f u n c t i o n ( c o n t e n t ) { $ ( s e l e c t o r ) . h t m l ( c o n t e n t ) } ) . t r i g g e r ( " c h a n g e d " , { } ) } , t r i g g e r : f u n c t i o n ( n a m e , d a t a ) { r e t u r n   t h i s . t h e n ( f u n c t i o n ( c o n t e n t ) { i f ( t y p e o f   d a t a = = " u n d e f i n e d " ) { d a t a = { c o n t e n t : c o n t e n t } } t h i s . e v e n t _ c o n t e x t . t r i g g e r ( n a m e , d a t a ) ; r e t u r n   c o n t e n t } ) } } ) ; S a m m y . E v e n t C o n t e x t = f u n c t i o n ( a p p , v e r b , p a t h , p a r a m s , t a r g e t ) { t h i s . a p p = a p p ; t h i s . v e r b = v e r b ; t h i s . p a t h = p a t h ; t h i s . p a r a m s = n e w   S a m m y . O b j e c t ( p a r a m s ) ; t h i s . t a r g e t = t a r g e t } ; S a m m y . E v e n t C o n t e x t . p r o t o t y p e = $ . e x t e n d ( { } , S a m m y . O b j e c t . p r o t o t y p e , { $ e l e m e n t : f u n c t i o n ( ) { r e t u r n   t h i s . a p p . $ e l e m e n t ( _ m a k e A r r a y ( a r g u m e n t s ) . s h i f t ( ) ) } , e n g i n e F o r : f u n c t i o n ( e n g i n e ) { v a r   c o n t e x t = t h i s , e n g i n e _ m a t c h ; i f ( _ i s F u n c t i o n ( e n g i n e ) ) { r e t u r n   e n g i n e } e n g i n e = ( e n g i n e | | c o n t e x t . a p p . t e m p l a t e _ e n g i n e ) . t o S t r i n g ( ) ; i f ( e n g i n e _ m a t c h = e n g i n e . m a t c h ( / \ . ( [ ^ \ . \ ? \ # ] + ) ( \ ? | $ ) / ) ) { e n g i n e = e n g i n e _ m a t c h [ 1 ] } i f ( e n g i n e & & _ i s F u n c t i o n ( c o n t e x t [ e n g i n e ] ) ) { r e t u r n   c o n t e x t [ e n g i n e ] } i f ( c o n t e x t . a p p . t e m p l a t e _ e n g i n e ) { r e t u r n   t h i s . e n g i n e F o r ( c o n t e x t . a p p . t e m p l a t e _ e n g i n e ) } r e t u r n   f u n c t i o n ( c o n t e n t , d a t a ) { r e t u r n   c o n t e n t } } , i n t e r p o l a t e : f u n c t i o n ( c o n t e n t , d a t a , e n g i n e , p a r t i a l s ) { r e t u r n   t h i s . e n g i n e F o r ( e n g i n e ) . a p p l y ( t h i s , [ c o n t e n t , d a t a , p a r t i a l s ] ) } , r e n d e r : f u n c t i o n ( l o c a t i o n , d a t a , c a l l b a c k , p a r t i a l s ) { r e t u r n   n e w   S a m m y . R e n d e r C o n t e x t ( t h i s ) . r e n d e r ( l o c a t i o n , d a t a , c a l l b a c k , p a r t i a l s ) } , r e n d e r E a c h : f u n c t i o n ( l o c a t i o n , n a m e , d a t a , c a l l b a c k ) { r e t u r n   n e w   S a m m y . R e n d e r C o n t e x t ( t h i s ) . r e n d e r E a c h ( l o c a t i o n , n a m e , d a t a , c a l l b a c k ) } , l o a d : f u n c t i o n ( l o c a t i o n , o p t i o n s , c a l l b a c k ) { r e t u r n   n e w   S a m m y . R e n d e r C o n t e x t ( t h i s ) . l o a d ( l o c a t i o n , o p t i o n s , c a l l b a c k ) } , l o a d P a r t i a l s : f u n c t i o n ( p a r t i a l s ) { r e t u r n   n e w   S a m m y . R e n d e r C o n t e x t ( t h i s ) . l o a d P a r t i a l s ( p a r t i a l s ) } , p a r t i a l : f u n c t i o n ( l o c a t i o n , d a t a , c a l l b a c k , p a r t i a l s ) { r e t u r n   n e w   S a m m y . R e n d e r C o n t e x t ( t h i s ) . p a r t i a l ( l o c a t i o n , d a t a , c a l l b a c k , p a r t i a l s ) } , s e n d : f u n c t i o n ( ) { v a r   r c t x = n e w   S a m m y . R e n d e r C o n t e x t ( t h i s ) ; r e t u r n   r c t x . s e n d . a p p l y ( r c t x , a r g u m e n t s ) } , r e d i r e c t : f u n c t i o n ( ) { v a r   t o , a r g s = _ m a k e A r r a y ( a r g u m e n t s ) , c u r r e n t _ l o c a t i o n = t h i s . a p p . g e t L o c a t i o n ( ) , l = a r g s . l e n g t h ; i f ( l > 1 ) { v a r   i = 0 , p a t h s = [ ] , p a i r s = [ ] , p a r a m s = { } , h a s _ p a r a m s = f a l s e ; f o r ( ; i < l ; i + + ) { i f ( t y p e o f   a r g s [ i ] = = " s t r i n g " ) { p a t h s . p u s h ( a r g s [ i ] ) } e l s e { $ . e x t e n d ( p a r a m s , a r g s [ i ] ) ; h a s _ p a r a m s = t r u e } } t o = p a t h s . j o i n ( " / " ) ; i f ( h a s _ p a r a m s ) { f o r ( v a r   k   i n   p a r a m s ) { p a i r s . p u s h ( t h i s . a p p . _ e n c o d e F o r m P a i r ( k , p a r a m s [ k ] ) ) } t o + = " ? " + p a i r s . j o i n ( " & " ) } } e l s e { t o = a r g s [ 0 ] } t h i s . t r i g g e r ( " r e d i r e c t " , { t o : t o } ) ; t h i s . a p p . l a s t _ l o c a t i o n = [ t h i s . v e r b , t h i s . p a t h ] ; t h i s . a p p . s e t L o c a t i o n ( t o ) ; i f ( n e w   R e g E x p ( t o ) . t e s t ( c u r r e n t _ l o c a t i o n ) ) { t h i s . a p p . t r i g g e r ( " l o c a t i o n - c h a n g e d " ) } } , t r i g g e r : f u n c t i o n ( n a m e , d a t a ) { i f ( t y p e o f   d a t a = = " u n d e f i n e d " ) { d a t a = { } } i f ( ! d a t a . c o n t e x t ) { d a t a . c o n t e x t = t h i s } r e t u r n   t h i s . a p p . t r i g g e r ( n a m e , d a t a ) } , e v e n t N a m e s p a c e : f u n c t i o n ( ) { r e t u r n   t h i s . a p p . e v e n t N a m e s p a c e ( ) } , s w a p : f u n c t i o n ( c o n t e n t s , c a l l b a c k ) { r e t u r n   t h i s . a p p . s w a p ( c o n t e n t s , c a l l b a c k ) } , n o t F o u n d : f u n c t i o n ( ) { r e t u r n   t h i s . a p p . n o t F o u n d ( t h i s . v e r b , t h i s . p a t h ) } , j s o n : f u n c t i o n ( s t r i n g ) { r e t u r n   $ . p a r s e J S O N ( s t r i n g ) } , t o S t r i n g : f u n c t i o n ( ) { r e t u r n " S a m m y . E v e n t C o n t e x t :   " + [ t h i s . v e r b , t h i s . p a t h , t h i s . p a r a m s ] . j o i n ( "   " ) } } ) ; r e t u r n   S a m m y } ) ;   -       http://localhost:15672/js/sammy-0.7.6.min.js                       !!            +H!!       C                         q      i                               !!      factory         +H;      "                      	     '=   HE      Q    5      /   	           Z   =   `    T   Q+            T     : 6   6   Q   (     define   function   amd   jquery   jQuery   window   Sammy   sammy5!!       C                           Dj     Dj           x               !!      $   Sammy   PATH_REPLACER#   PATH_NAME_MATCHER)   QUERY_STRING_MATCHER   _makeArray   _isFunction   _isArray   _isRegExp   _decode   _encode   _escapeHTML   _routeWrapper   _template_cache   _has_history   loggers       +H!!   :([\w\d]+)!!   \?([^#]*)?$ !!          _makeArrayC                     w    o                              !!      nonarray         +H;                                 5   5      
T  l      Array   prototype   slice	   call       5!!          _isFunctionC    [                   
    
                            !!      obj         +H;   $                              5   5      
T  l =   H a!    Object   prototype   toString	   call#   [object Function]       5!!    	      _isArrayB   `    `                  5!!    	      _isRegExpB s    k                    5!!    	      _decodeB            a             5!!    	      _escapeHTMLB 7    /                    5!!          _routeWrapperC                          /    /                          !!   	   verb        +H!!          _routeWrapper/<c      p        
         .    .   
                         !!      arguments   .this          +H;   [            
             	W   QW  QV  5       
V  Z      `       
   5   5      
V   l : O  s#@    route   apply   concat   Array   prototype   slice	   call     5;                                    ae 5!!            !!    	      SammyB    m    m     '               app   B            x             55!!          Sammy.addLoggerc     4                                                   !!      logger         +H;                                    
T   Q = 	   push       5!!          Sammy.logc                          I    I                          !!   	   args   arguments         +H!!          Sammy.log/<c                      #  G    G                            !!      i   logger         +H;                             T     
     O Q     apply       5;   ]   #                      	W   Q  V   :    Q       
=         :  =    Q     
       Q q:    unshift   [	   Date   ]	   each5!!        C      s                                                 !!      arguments          +H;   /                         	W   Q    5   5      
    5   V   O Q v    window   console   log   apply      5!!       B  0  Q  (  Q                 5!!       B             )            5!!       !!   makeArray!!!!   isFunction!!!!   isArray!!    !!          Sammy.Objectc                    	  C	  	  C	   
                        !!      obj   .this        +H!!            ;   3                        W   Q       
V   T  D      Q[       :  	    extend      5!!          toHashC                       	  	  	  	                          !!   	   json   .this         +H!!            !!          toHash/<c     T	                 	  	  	  	                            !!      k   v         +H;    *                     	       T :           T  T 8Q	    	]
        5;   1                         W   Q[       Q      
V       Q    	=9 	   each5!!    	      toHTMLB  	  
  	  
     	               display   B %
  n
  
  n
     	             55!!    	   	   keysB 
    
       %
            5!!    	      hasB &  `    `     
            5!!    	   	   joinB  n    f                   5!!    	      logB             l            5!!    	      toStringB 
                       #   include_functions    s   B ;    3                    55!!    	   !!   escapeHTML!!!!   h!!!!   toHash!!!!   toHTML!!!!	   keys!!!!   has!!!!	   join!!!!   log!!!!   toString!!    !!    	   %   targetIsThisWindowB   G    G                  5!!       5   Sammy.DefaultLocationProxyc                    k    c     
                         !!      app%   run_interval_every   .this        +H;   @                   	     W   QV   T  6    QV   B6   QV      6   QV      
T  Q !    app   is_native   has_history   _startPolling      5!!       G   Sammy.DefaultLocationProxy.fullPathc                                                      !!      location_obj   matches	   hash        +H!!   ^[^#]*(#.+)$ ;      *                     	 T      
:     
    : W   QV         V   ?7      =      W  QZ   T  5   `    T  5   `   V  `      
=   :      toString   match      pathname   search	   join       5!!       	   bindC                                                       !!      proxy   app   lp   .this         +H!!    	      bind/<b y    q                    5!!    	      bind/<b     |                    5!!    	      bind/<b   t    t                   B     w                    55;   G  e                /     # W   QV      QV   5       Q  5      Q     :    
=   V   5       
:       Q  E      Q   5       }           :    
=   V   5       
:      Q     : 	   
=
   =   V   5       
:      Q%      5       )      >6   Q+      5   
6   QQ 	&  $Y3     app)   DefaultLocationProxy   window	   bind   hashchange.   eventNamespace%   disable_push_state   popstate.   document   delegate   a   click.history-   _bindings5!!          unbindC     N                 +    +   
                         !!      .this          +H;     J                /     & W   Q       :    
=   V   5      
:   Q       :    
=   V   5      
:   Q      :    
=   =	   V   5      
:   Q   5
   5   
6   QQ   5
   5   >:   &          
   5
   5    Q   5
   @6   Q/    Q(0&.5;*)4*    window   unbind   hashchange.   app   eventNamespace   popstate.   document   undelegate   a   click.history-)   DefaultLocationProxy   _bindings   clearInterval   _interval      5!!          getLocationC                      @    8                              !!               +H;                                  5       
   5   :  " )   DefaultLocationProxy   fullPath   window   location       5!!    	      setLocationB   :    :     ,            5!!          _startPollingC                      Q  A  I  A                          !!      every   proxy   hashCheck   .this       +H!!          hashCheckC                                                         !!   !   current_location          +H!!    	      hashCheck/<b      y                    5;      %                              
:  W   Q  5   5   =   D   
   QV     5   5                   
    > Q     5   V   6   Q l|A:    getLocation)   DefaultLocationProxy   _last_location   undefined   window   setTimeout5;      4                    	 W  QV     Q  5    5    \      T      	   
U  Q	       W   QV     Q  5          
V   T  : 6   Q    * 7, )   DefaultLocationProxy   _interval   window   setInterval5!!       !!	   bind!!!!   unbind!!!!   getLocation!!!!   setLocation!!!!   _startPolling!!    !!       #   Sammy.Applicationc                       ^    V                            !!      app_function   app   .this       +H!!            !!            !!       Q   Sammy.Application/this.context_prototypec                     3  _  +  _   
"                        !!      arguments   .this          +H;   *                         	W   QW  Q  5       
V  V   O Q     EventContext   apply    5!!    	   '   Sammy.Application/<b p    h                    5;                     4     W   QV      QV   [    6    QV     5   A[   ,  R 6   QV   Z    6   QV   Z    6   QV      A,  R     
:  =         	   
   
:  X
: 6   QV      6   QV   5     5   A,  R  6   Q  T  : *   #   T     
V   Z   V   `    O Q'   V   5    8   *   V      
  5   AV   V   5   ,  R  Q0   V   5      2   V      
    Q4    
L!RS    routes   Object   listeners   arounds   befores	   Date   getTime   -   parseInt	   Math   random   namespace#   context_prototype   EventContext   prototype   apply   _location_proxy!   setLocationProxy)   DefaultLocationProxy%   run_interval_every   debug   bindToAllEvents5!!            !!      !!   run!!   unload!!   lookup-route!!   run-route!!   route-found!!)   event-context-before!!'   event-context-after!!   changed!!   error!!+   check-form-submission!!   redirect!!!   location-changed   !!    	      toStringB             *            5!!          $elementC    p                 4    4   
                         !!      selector   .this        +H;   U                        W   QT  .         V   5    :    
T  :          V   5    :     { !   element_selector	   find      5!!    	      useB  A  @   9  @                 5!!       !   setLocationProxyC                   Z   
!  R   
!   
                         !!      new_proxy   original_proxy   .this        +H;   u   3                     W  QV  5    W   QV  T  6    QV     
:  @      V         V      
  Q
   V  5       
  Q     "	    _location_proxy   isRunning   unbind	   bind      5!!          logC              	       !  q!  !  q!   
"                        !!      arguments   .this          +H;   W            	             	W   QW  Q   5       
      5   5      
Z   V  5   `    V   O O Q  4L    log   apply   Array   prototype   concat!   element_selector    5!!          routeC               	       !  $  x!  $                         !!	   	   verb	   path   app   param_names   add_route   path_match   callback   arguments   .this       +H!!          route/<c     "                 D#  y#  <#  y#                            !!      i   cb         +H;   -                     
     T '=    H         T     T 78Q
    "    string       5!!          add_routeC    %#                #  2$  #  2$                           !!      with_verb   r        +H!!       !!	   verb!!!!	   path!!!!   callback!!!!   param_names!!    ;      $                      [    T  ]       ]      ]      ]   W   Q   5   T     5   T  7D      QZ       8Q   5   T  7   
V    Q #7
0 	   verb	   path   callback   param_names   routes	   push       5!!    	      route/<b d$  w$  \$  w$     #             5;          @                 	       <    * 	W  QW  QV     QZ       Q    5   5      
V  l    Q      >HE      Q     :    1      Z      `       QT     Q=   U  Q   T     
:  U  Q   5              >6	   Q       m      
   
V   ?7 Q!        
   : W   @I(      A      
    : =   ,  R    Q0        
        Q      QT  =   H-   6        
V  5       Q   :      T   Q<   V   !,!


-@84>M  8    Array   prototype   slice	   call   length   any   toLowerCase   constructor   String   lastIndex	   push	   exec   RegExp   replace   $	   each   ROUTE_VERBS5!!    	      mapRoutesB /%  %  '%  %     $               app   B e%  %  ]%  %     $             55!!          eventNamespaceC     R%               %  %  %  %   
                         !!      .this          +H;   4                         W   QZ   =    `    V   5   `      
=   :  %U	    sammy-app   namespace	   join   -      5!!       	   bindC                      %  $(  %  $(                          !!   	   name	   data   callback   app#   listener_callback   .this       +H!!    	   #   listener_callbackB  g&  ~'  _&  ~'     %            5;      K                     W  QV     Q   '=          T    Q       W   QV  5   T  7       V  5   T  Z    8Q   V  5   T  7   
V    QV     
:         V     
T  V    Q   V   %$ #     undefined   listeners	   push   isRunning   _listen5!!          triggerC    '               5(  (  -(  (   
                         !!   	   name	   data   .this        +H;   a   +                     W   QV       
:     
Z   T  `    V      
:  `      
=   : Z   T `     QV    '7    $element   trigger   eventNamespace	   join   .      5!!    	      refreshB  (  (  (  (     =(            5!!    	      beforeB (  w)  (  w)     (            5!!    	      afterB )  )  ~)  )     )            5!!    	      aroundB )  *  )  *     j)            5!!    	      onCompleteB *  J*  *  J*     )            5!!          isRunningC     )               ]*  u*  U*  u*   
                         !!      .this          +H;                            W   QV   5     )    _running      5!!    	      helpersB *  *  ~*  *     *            5!!    	      helperB *  -+  *  -+     }*            5!!          runC                      :+  F.  2+  F.                          !!      start_url   app   .this       +H!!    	      run/<b +  ,  +  ,     4+             	   name   B +   ,  +   ,     ^+             55!!       !!   start_url!!    !!   \#(.+) !!    	      run/<b  -  *-  
-  *-     ,             5!!    	      run/<b G-  -  ?-  -     ,             5!!    	      run/<b  .  %.  .  %.     -             5;   t                  ,      W   QV       
:        B   V      Q     
V   5      
:       QV      
=   [   T  ]    QV   C6   QV   @6   Q   	   
V   
   
:  :  E      QT  '=            V      
T   Q   V      
  QV   5      
  QV      
=       QV      
=       Q     :    
=       QV      
=   :  * +  %:  
(    isRunning	   each   listeners   toHash   trigger   run   start_url   _running   last_location	   test   getLocation   undefined   setLocation   _checkLocation   _location_proxy	   bind!   location-changed   submit   window   unload   changed5!!          unloadC                       V.  /  N.  /                          !!      app   .this         +H!!          unload/<c                         (/  /   /  /                          !!   	   name   listeners        +H!!          unload/</<c     .                 R/  /  J/  /                            !!      i#   listener_callback         +H;                                   
   T  Q / !    _unlisten       5;                                   
T      Q .T 	   each5;      c                      W   QV       
:         B   V      QV      
=    QV   5      
  QV      
:     
=   :    
      
:   Q  	   
V   5
      
:       QV   B6   QV    - B	!"      isRunning   trigger   unload   _location_proxy   unbind   $element   submit   removeClass   eventNamespace	   each   listeners   toHash   _running5!!    	      destroyB  /  	0  /  	0     [/            5!!    	      bindToAllEventsB "0  0  0  0     /               callback    app   B Y0  t0  Q0  t0     /             5   B 0  0  0  0     70             55!!          routablePathC    0                 1  @1  1  @1                            !!   	   path         +H;                             T      
   =   :  0     replace          5!!          lookupRouteC    0        	       U1  E2  M1  E2   
                        !!   	   verb	   path   app   routed   i   l   route   .this        +H;       V   ~         V         	            W  QV  W   QBW  Q>W  QV  5    T  7=         V  5    T  7   W  Q o   m   V  5    T  7V  7W  QV      
T :    
V  5   :       V  W  Q+      V  W  QQ   V  V     V   1' o]~)Pf    routes   undefined   length   routablePath   match	   path      5!!          runRouteC                      W2  9  O2  9                        !!   	   verb	   path   params   target   app   route   context   wrapped_route   arounds   around   befores   before   callback_args   path_params   final_returned   .this       !!          e         +H!!       !!	   verb!!!!	   path!!!!   params!!    !!            !!       !!   route!!    !!    	      runRoute/<b q4  
5  i4  
5     	4             5!!          wrapped_routeC                        5  8  5  8                         !!      returned   i   nextRoute         +H!!       !!   context!!    !!          nextRouteC     47                 7  J8  7  J8                            !!               +H;      /                              QQ  5       79        5       7   
  	  O    QT        5   E      Q  5   =   H              
   Q    77%&    callback   apply   _onComplete   function       5!!       !!   context!!    ;       
                            A     +       m         
:    Q     
    >7: H        ?7   
  Z     `    O    Q   BH      B           >l       6   Q     
=   [      ]    Q  5   =	   H)   )     Z     5   `    6   Q/     5   E   2   Q  5      5   9   6      Q   W   Q	  
   
V    QV     Q:        
=   [     ]    Q    5-  *" ^  (5$'  '1    shift+   contextMatchesOptions   apply   length   last_route   trigger)   event-context-before   context   callback   function	   push'   event-context-after5!!    	      runRoute/<b 8  \9  8  \9     x8                around %   last_wrapped_route   B  &9  [9  9  [9     8             55;        e          N                       [    > W  QV     QV      
T  T :    QV  5   B   	   V     
=   Z   T  `    T `      
=   :  Q   V     
=   [    T  ]   T ]	      ]
    Q   '=         [      Q        
   V     
T :  Q     $   V     
=   [      ]    Q   5	      
V     
T : : W  @I2   1   V     
  Q     
V      Q6   V  5   AV  T  T    T ,  R    QV  5      
>: W   QV  5      
>:    QZ      `     	  Q   5   )   E    	     
   5   :  	  QJ         Q     
V      
:      Q   :  W  Q[   Q     Qv  QV     
Z   =   `    T  `   T `      
=   : V   Q Y   V     Y   V     
T  T : [    2w&

<
/)!'  9		   +;    lookupRoute   debug   log   runRoute	   join       trigger   run-route	   verb	   path   params   undefined   extend#   _parseQueryString   route-found   route	   exec   routablePath   shift	   each#   context_prototype   arounds   slice   befores   splat   concat   reverse   error   500 Error   notFound5!!    	   +   contextMatchesOptionsB :  l>  :  l>     9            5!!          getLocationC     >               >  >  y>  >   
                         !!      .this          +H;                            W   QV   5       
:   >    _location_proxy   getLocation      5!!    	      setLocationB >  ?  >  ?     [>            5!!    	   	   swapB ?  ?  ?  ?     >            5!!    	      templateCacheB ?  @  ?  @     5?             5!!    	   %   clearTemplateCacheB  '@  D@  @  D@     ?             5!!          notFoundC    ?               V@  @  N@  @   
                         !!   	   verb	   path   ret   .this        +H;   p   &                     W  QV      
Z   =   `    T  `   T `      
=   : : W   QT  =   H      V         C    @-    error   404 Not Found	   join       get      5!!          errorC    `@               @  A  @  A   
                        !!      message   original_error   .this        +H!!       !!   message!!!!   error!!    ;      K                     W   QT            A,  R  U Q   T Z   T  `    T 5   `      
=   : 6   QV      
=   [    T 5   ]   T ]    QV   5         T p$      V      
T 5   T  Q    @|

J+    Error   message	   join       trigger   error   raise_errors   log      5!!          _checkLocationC     A               B  B  B  B   
                         !!      location   returned   .this          +H;      /                     	 W  QV      
:  W   QV  5    D7      QV  5   >7=   D   
   QV  5   ?7V      H      V  Z   =   `    V   `   6   QV     
=   V   : W  Q   V   AT
    getLocation   last_location   get   runRoute      5!!    	      _getFormVerbB C  D  
C  D     B             5!!    	   )   _checkFormSubmissionB *D  /F  "D  /F     C            5!!    	   )   _serializeFormParamsB MF  _G  EF  _G     E            5!!    	      _encodeFormPairB xG  G  pG  G     G             5!!    	   !   _parseFormParamsB G  H  G  H     _G            5!!       #   _parseQueryStringC    2H               H  I  H  I   
                       !!   	   path   params   parts   pairs	   pair   i   .this        +H!!            ;       q           c                     W  Q[    W   QT      
   : W  QV  E      QV  ?7      	   V  ?7   
=   : W  Q>W  Q    m   V  V  7   
=   : W  QV     
V      V  >7:    V  ?7D      Q=      : : W   Q   V  W  QQ   V  V     n   V    HD&  q  #x    match   split   &   =   _parseParamPair      length      5!!    	      _parseParamPairB I  sJ  I  sJ     VI             5!!          _listenC    J               J  J  |J  J   
                         !!   	   name   callback   .this        +H;   R   #                     W   QV       
:     
Z   T  `    V      
:  `      
=   : T :  J,5    $element	   bind   eventNamespace	   join   .      5!!          _unlistenC    J               J  SK  J  SK   
                         !!   	   name   callback   .this        +H;   R   #                     W   QV       
:     
Z   T  `    V      
:  `      
=   : T :  J7    $element   unbind   eventNamespace	   join   .      5!!    ;   !!   ROUTE_VERBS!!!!   APP_EVENTS!!!!   _last_route!!!!   _location_proxy!!!!   _running!!!!!   element_selector!!!!   debug!!!!   raise_errors!!!!%   run_interval_every!!!!%   disable_push_state!!!!   template_engine!!!!   toString!!!!   $element!!!!   use!!!!!   setLocationProxy!!!!   log!!!!   route!!!!   get!!!!	   post!!!!   put!!!!   del!!!!   any!!!!   mapRoutes!!!!   eventNamespace!!!!	   bind!!!!   trigger!!!!   refresh!!!!   before!!!!   after!!!!   around!!!!   onComplete!!!!   isRunning!!!!   helpers!!!!   helper!!!!   run!!!!   unload!!!!   destroy!!!!   bindToAllEvents!!!!   routablePath!!!!   lookupRoute!!!!   runRoute!!!!+   contextMatchesOptions!!!!   getLocation!!!!   setLocation!!!!	   swap!!!!   templateCache!!!!%   clearTemplateCache!!!!   notFound!!!!   error!!!!   _checkLocation!!!!   _getFormVerb!!!!)   _checkFormSubmission!!!!)   _serializeFormParams!!!!   _encodeFormPair!!!!!   _parseFormParams!!!!#   _parseQueryString!!!!   _parseParamPair!!!!   _listen!!!!   _unlisten!!    !!    	   '   Sammy.RenderContextb rK  L  jK  L     
K            5!!            !!    	   	   thenB \L  DN  TL  DN     K     	          callback    helper    context   B L  6M  L  6M     L            5   B  M  4N  M  4N     LM             55!!    	   	   waitB  RN  gN  JN  gN     M            5!!    	   	   nextB uN  *O  mN  *O     N            5!!    	   	   loadB 8O  S  0O  S     N               location    options    callback    context   B  ~O  S  vO  S     O               should_cache   B 3R  R  +R  R     Q             555!!    	      loadPartialsB S  T  S  T     US               partials   B T  T  T  T     S             	   name   B VT  ~T  NT  ~T     S            555!!    	      renderB T  U  T  U     BT            5!!    	      partialB V  W  U  W     U            5!!    	   	   sendB  W  W  W  W     V              context 	   args    fun   B W  W  W  W     $W               B W  W  W  W     @W             555!!    	      collectB X  Y  X  Y     W               array    callback    context   B  FX  Y  >X  Y     W               contents 	   doms   B X  XY  X  XY     JX             555!!    	      renderEachB Y  1\  Y  1\     PY               location 	   name 	   data    callback   B 3Z  /\  +Z  /\     Y               content 	   rctx   B Z  ^[  Z  ^[     LZ            5   B [  '\  ~[  '\     [            555!!    	      interpolateB F\  k]  >\  k]     [            	   data    engine    retain    context   B \  i]  }\  i]     \            55!!    	   	   swapB y]  ]  q]  ]     ]               callback   B ]  ]  ]  ]     5]            55!!    	      appendToB 
^  l^  ^  l^     ]               selector   B .^  T^  &^  T^     ]             55!!    	      prependToB ^  ^  w^  ^     ^               selector   B ^  ^  ^  ^     ;^             55!!    	      replaceB ^  S_  ^  S_     ^               selector   B _  ;_  _  ;_     ^             55!!    	      triggerB d_  _  \_  _     ^            	   name 	   data   B _  _  _  _     !_            55!!       !!	   then!!!!	   wait!!!!	   next!!!!	   load!!!!   loadPartials!!!!   render!!!!   partial!!!!	   send!!!!   collect!!!!   renderEach!!!!   interpolate!!!!	   swap!!!!   appendTo!!!!   prependTo!!!!   replace!!!!   trigger!!    !!       %   Sammy.EventContextc     _               `  `  `  `   
                         !!      app	   verb	   path   params   target   .this        +H;   Z   $                     W   QV   T  6    QV   T 6   QV   T 6   QV      5   AT ,  R 6   QV   T 6   Q _    app	   verb	   path   Object   params   target      5!!            !!    	      $elementB  `  +a  `  +a     `           5!!    	      engineForB >a  b  6a  b     `              B b  b  b  b     Jb             55!!    	      interpolateB b  Gc  b  Gc     ~b            5!!    	      renderB Wc  c  Oc  c     b            5!!    	      renderEachB c  Ed  c  Ed     rc            5!!    	   	   loadB Sd  d  Kd  d     c            5!!    	      loadPartialsB d  e  d  e     bd            5!!    	      partialB "e  e  e  e     d            5!!    	   	   sendB  e  e  e  e     8e           5!!    	      redirectB  f  Rh  e  Rh     e    	       5!!          triggerC    g               ch  h  [h  h   
                        !!   	   name	   data   .this        +H!!            ;   h   '                     W   QT '=          [    U Q   T 5       
   T V   6   Q   V   5      
T  T :  h
    undefined   context   app   trigger      5!!    	      eventNamespaceB  h  i  h  i     h            5!!    	   	   swapB %i  ai  i  ai     h            5!!    	      notFoundB  si  i  ki  i     i            5!!    	   	   jsonB i  i  i  i     Ji             5!!    	      toStringB  i  4j  i  4j     i            5!!       !!   $element!!!!   engineFor!!!!   interpolate!!!!   render!!!!   renderEach!!!!	   load!!!!   loadPartials!!!!   partial!!!!	   send!!!!   redirect!!!!   trigger!!!!   eventNamespace!!!!	   swap!!!!   notFound!!!!	   json!!!!   toString!!    ;o     	                    V =       Q       Q      Q      Q      Q    	  Q    
  Q      Q      Q   W   Q   W  Q[	      Q   5   E      Q   5   	        QZ       Q
      Q   =   6   Q      6   Q      6   Q   5	   =
            5	   5   =   HE(      Q      5	   5   5   : #   $   $         
    Q   '         
    Q*   5   *   	   '=
      .         
    Q1         
   [      ]      ]    	  ]    Q      6   Q      
   5   5   [   V   ]   V   ]      ]      ]      ]      ]      ]      ]      ]    Q      6   Q      6   Q   5      6   Q      
   5   5   ["      ]      ]      ]        ]!   !   ]"    Q   #   6#   Q   5#         
[$      5   5   [Q   Z   =$   `    =%   `   =&   `   ='   `   ](   f%   ])   @]*   @]+   B],   =-   ].   B]/   B]0   2]1   B]2   @]3   &   ]   '   ]4   (   ]5   )   ]6   *   ]   +   ]7   V  =$   : ]$   V  =%   : ]%   V  =&   : ]&   V  ='   : ]8   V  =9   : ]9   ,   ]:   -   ];   .   ]   /   ]<   0   ]=   1   ]>   2   ]?   3   ]@   4   ]A   5   ]B   6   ]C   7   ]D   8   ]E   9   ]F   :   ]G   ;   ]H   <   ]I   =   ]J   >   ]K   ?   ]L   @   ]    A   ]!   B   ]M   C   ]N   D   ]O   E   ]P   F   ]Q   G   ]R   H   ]S   I   ]T   J   ]U   K   ]V   L   ]W   M   ]X   N   ]Y   O   ]Z   P   ][   : 6   Q   R   6\   Q   5\         
[S      5   5   [d   T   ]]   U   ]^   V   ]_   W   ]`   X   ]a   Y   ]b   Z   ]c   [   ]d   \   ]e   ]   ]f   ^   ]g   _   ]M   `   ]h   a   ]i   b   ]j   c   ]<   : 6   Q   e   6k   Q   5k         
[f      5   5   [w   g   ]4   h   ]l   i   ]g   j   ]b   k   ]f   l   ]`   m   ]a   n   ]c   o   ]d   p   ]m   q   ]<   r   ];   s   ]M   t   ]P   u   ]n   v   ]   : 6   Q     #LYWVO    - 7  '('O><M:!f    Gg1M q     /  T  	 i@
  Fn   g )  H :pY  KCE+`X  lW  J   vBZ~  9u D    # 0N   &  n /  B #   }   Z      :  tvq   AM vo]  _ a  <JC2 	z    ([^/]+)%   encodeURIComponent   window   history   pushState   0.7.6   VERSION   addLogger   log   console   undefined   function   apply   extend   makeArray   isFunction   isArray   Object   prototype   escapeHTML   h   toHash   toHTML	   keys   has	   join   toString%   targetIsThisWindow)   DefaultLocationProxy   fullPath	   bind   unbind   getLocation   setLocation   _startPolling   Application   get	   post   put   delete   ROUTE_VERBS   APP_EVENTS   _last_route   _location_proxy   _running	   body!   element_selector   debug   raise_errors%   run_interval_every%   disable_push_state   template_engine   $element   use!   setLocationProxy   route   del   any   mapRoutes   eventNamespace   trigger   refresh   before   after   around   onComplete   isRunning   helpers   helper   run   unload   destroy   bindToAllEvents   routablePath   lookupRoute   runRoute+   contextMatchesOptions	   swap   templateCache%   clearTemplateCache   notFound   error   _checkLocation   _getFormVerb)   _checkFormSubmission)   _serializeFormParams   _encodeFormPair!   _parseFormParams#   _parseQueryString   _parseParamPair   _listen   _unlisten   RenderContext	   then	   wait	   next	   load   loadPartials   render   partial	   send   collect   renderEach   interpolate   appendTo   prependTo   replace   EventContext   engineFor   redirect	   json5;                                       Q   iT       ^UW^UWAe^UI   -    :http://localhost:15672/js/sammy-0.7.6.min.js strongly-framed 1 request-method GET response-head HTTP/1.1 200 OK
content-length: 27206
content-type: application/javascript
etag: "3865333060"
last-modified: Tue, 25 Feb 2020 23:42:19 GMT
date: Wed, 26 Feb 2020 01:05:27 GMT
server: Cowboy
 original-response-headers server: Cowboy
date: Tue, 25 Feb 2020 23:48:11 GMT
content-length: 27206
content-type: application/javascript
etag: "3865333060"
last-modified: Tue, 25 Feb 2020 23:42:19 GMT
 ctid 2 uncompressed-len 0 necko:classified 1 alt-data 1;27206,javascript/moz-bytecode-20190718161435 alt-data-from-child 1  V